!function(){$.ajaxSetup({timeout:1e4,cache:!1});var e={create:"POST",update:"PUT","delete":"DELETE",read:"GET"},t=function(e,t){return e&&e[t]?_.isFunction(e[t])?e[t]():e[t]:null},a=function(){throw new Error('A "url" property or function must be specified')};Backbone.originalSync=Backbone.sync,Backbone.sync=function(n,o,r){var i=e[n],u={type:i,dataType:"json"};return r.url||(u.url=t(o,"url")||a()),r.recursive===!0&&(u.url+="?recursive=true"),r.data||!o||"create"!=n&&"update"!=n||(u.contentType="application/json",u.data=JSON.stringify(o.toJSON())),Backbone.emulateJSON&&(u.contentType="application/x-www-form-urlencoded",u.data=u.data?{model:u.data}:{}),Backbone.emulateHTTP&&("PUT"===i||"DELETE"===i)&&(Backbone.emulateJSON&&(u.data._method=i),u.type="POST",u.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",i)}),"GET"===u.type||Backbone.emulateJSON||(u.processData=!1),u.beforeSend=function(e){if(CCweb.models.auth.isValid()){var t=CCweb.models.auth.get("requestHeaderToken");e.setRequestHeader("Authorization",t)}var a="#appsettings"===window.location.hash&&CCweb.util.isIE9OrEarlier()?"/appsettings":document.URL;e.setRequestHeader("X-Referer",a),e.setRequestHeader("If-Modified-Since","Sat, 1 Jan 2000 00:00:00 GMT")},$.ajax(_.extend(u,r))},Backbone.View.prototype.close=function(){this.remove(),this.unbind(),this.onClose&&this.onClose()}}();