CCweb.view_price=Backbone.View.extend({className:"plan_cost",initialize:function(){_.bindAll(this,"render","onPriceSizeChange","onClose"),this.superscriptTemplate=_.template('<span class="superscript"><%= symbol %></span>'),this.priceTemplate=_.template("<%= priceWithoutSymbolAndCents %>"),this.centsTemplate=_.template('<span class="superscript cents"><%= cents %></span>'),this.symbolTemplate=_.template('<span class="superscript symbol_suffix"><%= symbol %></span>'),this.durationTemplate=_.template("<span class=\"<%= (cents || !isSymbolPrefix)? 'per_month' : 'per_month no_indent' %>\" ><%= durationString %></span>"),this.model.on("change:price",this.render,this),CCweb.models.currency.on("change:showSmallPrice",this.onPriceSizeChange,this)},render:function(){if(this.model.defaults.price===this.model.get("price"))this.$el.empty().append(this.model.get("price"));else{var e=CCweb.util.breakDownPrice(this.model.get("price"),this.model.get("priceFormatString"));e.durationString=CCweb.util.loc("/mo"),"YEAR_PREPAID"===this.model.get("dropdown")&&(e.durationString=CCweb.util.loc("/yr")),this.$el.empty(),e.symbol&&e.isSymbolPrefix&&this.$el.append(this.superscriptTemplate(e)),this.$el.append(this.priceTemplate(e)),e.cents&&this.$el.append(this.centsTemplate(e)),e.symbol&&!e.isSymbolPrefix&&this.$el.append(this.symbolTemplate(e)),e.symbol&&this.$el.append(this.durationTemplate(e)),this.model.get("disableSmallerPrice")||(CCweb.models.currency.get("showSmallPrice")?this.$el.addClass("smaller_price"):this.showSmallPriceSize(e)&&CCweb.models.currency.set("showSmallPrice",!0))}return this},showSmallPriceSize:function(e){return e.symbol&&(e.priceWithoutSymbolAndCents.length>5||e.durationString.length>5&&e.priceWithoutSymbolAndCents.length>4)},onPriceSizeChange:function(){this.model.get("disableSmallerPrice")||(CCweb.models.currency.get("showSmallPrice")?this.model.defaults.price!==this.model.get("price")&&this.$el.addClass("smaller_price"):this.$el.removeClass("smaller_price"))},onClose:function(){CCweb.models.currency.off("change:showSmallPrice",this.onPriceSizeChange,this),this.model.off("change:price",this.render,this)}});