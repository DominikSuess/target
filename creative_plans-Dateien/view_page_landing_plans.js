CCweb.view_page_landing_plans=Backbone.View.extend({className:"l-landing_plans",initialize:function(e){e=e||{},_.bindAll(this,"render","clearPage","showInfoOverlay","showPlansOverlay","defineMboxTop","updateMboxTop"),this.templateMarkupNew=_.template('<div id="plans-top-mbox"></div><div class="section wrapper group"><div class="overlay_container"></div><div class="plans_container"></div></div>');var a=(CCweb.util.getProductIconPath(),CCweb.util.loc("Get started with Creative Cloud in just minutes.")),t=CCweb.util.loc("Learn more about Creative Cloud"),n="購入ガイド";this.templateInfoOverlay=_.template('<div class="section info_overlay group card" style="display:none"><div class="header"><div class="large_icon"></div><h1>'+a+'</h1></div><div class="learn_more">'+CCweb.util.loc("Get all of our latest creative apps and services right on your desktop. And keep creating anywhere with new connected mobile apps. ")+'<a href="http://www.adobe.com/go/'+("stage"===CCweb.config.ccm_env?"stage":"prod")+'_cc_overview" target="_self">'+t+"&nbsp;&nbsp;&#8594;</a></div></div>"),this.templateInfoOverlayJapan=_.template('<div class="section info_overlay group card" style="display:none"><div class="header"><div class="large_icon"></div><h1>'+a+'</h1></div><div class="learn_more">'+CCweb.util.loc("Get all of our latest creative apps and services right on your desktop. And keep creating anywhere with new connected mobile apps. ")+'<a href="http://www.adobe.com/go/'+("stage"===CCweb.config.ccm_env?"stage":"prod")+'_cc_overview" target="_self">'+t+'</a>&nbsp;|&nbsp;<a href="http://www.'+("stage"===CCweb.config.ccm_env?"stage.adobe.com":"adobe.com")+'/jp/jos/creativecloud/buying-guide.html" target="_blank">'+n+"</a></div></div>"),CCweb.models.currency=new CCweb.model_currency,CCweb.models.currency.on("change:currency",this.updateMboxTop,this)},render:function(){_.delay(function(){window.scrollTo(0,0)},0),$("html").addClass("page_landing_plans_html"),$(this.el).html(this.templateMarkupNew);var e=this,a=this.isJapaneseUser()&&"ja"===CCweb.config.locale;this.$(".overlay_container").html(a?this.templateInfoOverlayJapan:this.templateInfoOverlay),_.delay(function(){e.showInfoOverlay()},0);var t=new CCweb.view_plans({model:this.model});return this.$(".plans_container").empty().append(t.render().$el),_.delay(function(){if(e.showPlansOverlay(),CCweb.util.hasFeature("ccm_grand_gesture")){var a="offers"===CCweb.util.getParam("plan");a&&e.showGrandGesture()}},0),this.defineMboxTop(),this.updateMboxTop(),CCweb.events.bind("page_view",this.clearPage),this.delegateEvents(this.events),this},clearPage:function(){$("html").removeClass("page_landing_plans_html"),CCweb.events.unbind("page_view",this.clearPage),this.remove()},showInfoOverlay:function(){this.$(".info_overlay").css("opacity",0),this.$(".info_overlay").show().animate({opacity:1},200)},showPlansOverlay:function(){this.$(".plans").css("opacity",0),this.$(".plans").show().animate({opacity:1},200)},showTabs:function(){this.$(".plans .special_offers").hide(),this.$(".plans .plans_tabs_container").fadeIn(600),this.$(".plans .plans_tabs_contents").fadeIn(600)},showGrandGesture:function(){this.$(".plans .plans_tabs_container").hide(),this.$(".plans .plans_tabs_contents").hide(),this.$(".plans .special_offers").fadeIn(600),CCweb.app.navigate("/plans")},getTopMboxParams:function(){return{page:"plans",sLang:CCweb.config.locale,overrideLanguage:CCweb.config.locale,currency:CCweb.models.currency.get("currency"),targetedTab:CCweb.util.getParam("plan")?CCweb.util.getParam("plan"):"individual",authenticatedStats:null,ccmPlanType:null}},defineMboxTop:function(){var e=("prod"!==CCweb.config.ccm_env?"stage_":"")+"ccm_mbox_dynamic_top";CCweb.TT.mboxDefine({htmlClass:"plans-top-mbox",mboxName:e,params:this.getTopMboxParams()})},updateMboxTop:function(){var e=("prod"!==CCweb.config.ccm_env?"stage_":"")+"ccm_mbox_dynamic_top";CCweb.TT.mboxUpdate({mboxName:e,params:this.getTopMboxParams()})},isJapaneseUser:function(){var e="";return CCweb.models.auth.isValid()&&CCweb.models.profile&&CCweb.models.profile.get("countryCode")?e=CCweb.models.profile.get("countryCode").toLowerCase():CCweb.models.ip_profile&&CCweb.models.ip_profile.getValidCountryCode()&&(e=CCweb.models.ip_profile.getValidCountryCode(),e&&e.length>0&&(e=e.toLowerCase())),"jp"===e},onClose:function(){CCweb.models.currency.off("change:currency",this.updateMboxTop,this)}});