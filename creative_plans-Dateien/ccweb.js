var CCweb={events:_.extend({},Backbone.Events),FLAGS:{},collections:{},models:{},views:{},config:{},dictionary:{},currentPage:"unknown",manifest:{quota_message:["common/notify-service/main","common/user-quota"],wait:["/css/header.css","/js/view_wait.js"],page_cookies:["/js/view_page_cookies.js"],page_error:["/js/view_page_error.js"],page_not_found:["/js/view_page_not_found.js"],sticky_note:["/css/sticky_note.css","/js/view_sticky_note.js"],ims_dialog:["/css/ims_dialog.css","/js/view_ims_dialog.js"],header_new:["/css/header.css","/js/view_files_quota.js","common/user-quota","/js/modal_dialogs.js"],header:["/css/header.css","/js/modal_dialogs.js","/js/view_header_new.js"],footer:["/css/footer.css","/js/view_footer.js"],modal_dialogs:["/css/modal_dialogs.css","/css/signin.css","common/utils/date","/js/view_modal_dialog_restoreVersion.js","/js/view_modal_dialog_signup.js"]},manifestLoaded:{},getConfigAttr:function(e){return CCweb.config[e]},load:function(e,t,i){if(i=i||this,CCweb.manifest[e]){if(CCweb.manifestLoaded[e])return CCweb.events.trigger(e+":resourcesLoaded"),t.call(i),void CCweb.events.trigger(e+":callbackcomplete");var a=_.map(_.filter(CCweb.manifest[e],function(e){return e}),function(e){var t=e.split(".").pop(),i=e;return"/"===i.charAt(0)&&(i=CCweb.config.buildPath+"/resource"+i),"css"===t&&(i="css!"+i),i});CCweb.events.trigger(e+":lazyLoadBegin"),require(a,function(){CCweb.manifestLoaded[e]=!0,CCweb.events.trigger(e+":resourcesLoaded"),t.call(i),CCweb.events.trigger(e+":callbackcomplete")})}},injectHeader:function(){CCweb.util.hasFeature("temp_ims_optimize")?CCweb.load("header",function(){CCweb.views.header=CCweb.views.header||new CCweb.view_header,$("#header .t1").append(CCweb.views.header.render().$el)}):(CCweb.manifest.header_new.push("/js/view_header_new.js"),CCweb.load("header_new",function(){CCweb.views.header=CCweb.views.header||new CCweb.view_header({model:CCweb.models.profile}),$("#header .t1").append(CCweb.views.header.render().$el)}))},injectFooter:function(e){var t=function(){if(!CCweb.util.hasFeature("temp_ims_optimize")){if(CCweb.models.auth.isValid()&&(!CCweb.models.profile||!CCweb.models.profile.get("userId")))return void CCweb.events.on("profile_data_ready",t);CCweb.events.off("profile_data_ready",t)}CCweb.views.footer=CCweb.views.footer||new CCweb.view_footer({model:CCweb.models.profile,pageName:e}),$("#footer").append(CCweb.views.footer.render().$el)};CCweb.load("footer",t)},loadPage:function(e,t){if(CCweb.events.trigger("load_page:"+e+":begin"),!CCweb.util.hasCookiesEnabled())return void CCweb.load("page_cookies",function(){CCweb.views.page_cookies=CCweb.views.page_cookies||new CCweb.view_page_cookies,$(document.body).append(CCweb.views.page_cookies.render().$el)});var i=window.location.pathname.length>1?window.location.pathname:location.hash;"/"==i[0]&&(i=i.substring(1)),i?CCweb.util.localStorageSet("cc-saved-location",i):CCweb.util.localStorageRemove("cc-saved-location"),CCweb.views.layout=CCweb.views.layout||new CCweb.view_layout,document.getElementById(CCweb.views.layout.id)||$(document.body).append(CCweb.views.layout.render().$el),CCweb.util.hasFeature("temp_ims_optimize")||CCweb.injectHeader();var a=function(){CCweb.util.hasFeature("temp_ims_optimize")&&CCweb.injectHeader(),CCweb.events.off("profile_model_ready",a),CCweb.util.hasFeature("performance_profiling")&&CCweb.events.trigger("initToLoadPageCallback:end"),t.call(CCweb.app),CCweb.events.trigger("load_page:"+e+":end"),CCweb.injectFooter(e)};CCweb.load(e,function(){if(CCweb.util.hasFeature("performance_profiling")&&CCweb.util.hasFeature("temp_ims_optimize")&&(e.indexOf("page_join")>=0?CCweb.events.trigger("join_page_manifest:end"):e.indexOf("page_landing_plans")>=0&&CCweb.events.trigger("plans_page:loaded")),CCweb.util.hasFeature("temp_ims_optimize"))CCweb.models.auth&&CCweb.models.auth.isReady()&&(!CCweb.models.auth.isValid()||CCweb.models.profile&&CCweb.models.profile.get("userId"))?a():CCweb.events.on("profile_model_ready",a,this);else{var i=["page_sync","page_websites"];if(CCweb.util.hasFeature("performance_profiling")&&CCweb.events.trigger("initToLoadPageCallback:end"),!CCweb.models.auth.isValid()||CCweb.models.profile&&CCweb.models.profile.get("userId"))_.indexOf(i,e)>=0&&!CCweb.models.auth.isValid()?CCweb.events.trigger("signin_view",t):t.call(CCweb.app);else{var o=function(){CCweb.events.off("profile_data_ready",o),t.call(CCweb.app)};CCweb.events.on("profile_data_ready",o)}CCweb.events.trigger("load_page:"+e+":end")}},this),CCweb.util.hasFeature("temp_ims_optimize")||CCweb.injectFooter(e)},loadInfoMessages:function(e){var t=function(){$(".info-message").length&&$(".info-message").remove()},i=function(){CCweb.models.auth.isValid()&&require(["common/datastore/sharedcloud/quota/read"],function(i){i.read().then(function(i){if(i&&i.storage_used){var a=CCweb.util.getInfoMessageForPath(e,i.storage_used);a?require(["files/info-messages/view"],function(e){$("#content").before(e.render(a).$el)}):t()}}).fail(t)})};!CCweb.util.hasFeature("temp_ims_optimize")||CCweb.models.auth&&CCweb.models.auth.isReady()?i():CCweb.events.on("profile_model_ready",i)},init:function(e){var t,i;(function(){var t=$.Deferred(),a=e.features,o=CCweb.util.getParam("addfeatures"),n=null===o?CCweb.util.getCookie("creative-cloud-addff"):o;if(n){var r=_.without(n.split(","),"");a=_.union(a,r)}null!==o&&CCweb.util.setCookie("creative-cloud-addff",n,1);var s=CCweb.util.getParam("remfeatures"),C=null===s?CCweb.util.getCookie("creative-cloud-remff"):s;if(C){var l=_.without(C.split(","),"");a=_.difference(a,l)}return null!==s&&CCweb.util.setCookie("creative-cloud-remff",C,1),e.features=a,CCweb.config=e,CCweb.util.hasFeature("performance_profiling")&&(CCweb.events.trigger("initToLoadPageCallback:start"),CCweb.events.trigger("ccweb_js:start"),CCweb.events.trigger("join:teamPageLoadToAnywareReadyStart")),CCweb.util.cantUseCORS&&(CCweb.config.sharedcloud_proxy_url="/scproxy"),CCweb.util.hasFeature("temp_ims_optimize")?require(["files/loading/view","common/utils/log","common/utils/logAjaxDuration","js/site-catalyst-connect","js/view_layout"],function(e,a,o){return i=(new e).render(),$(document.body).append(i.$el),CCweb.log=a,CCweb.logAjaxDuration=o,t.resolve()}):(require(["files/loading/view"],function(e){i=(new e).render().$el,$(document.body).append(i)}),require(["common/utils/log","common/utils/logAjaxDuration"],function(e,i){return CCweb.log=e,CCweb.logAjaxDuration=i,t.resolve()})),t})().then(function(){if(CCweb.util.hasFeature("temp_update_nav")){var e;if(CCweb.util.hasFeature("temp_ims_optimize")){var t=$.Deferred();return e=CCweb.util.getCurrentBasePath(),!e||e.length<1?(window.location=CCweb.util.adobeURL(),t):t.resolve()}e=CCweb.util.getCurrentBasePath(),(!e||e.length<1)&&(window.location=CCweb.util.adobeURL())}}).then(function(){if(!CCweb.util.hasFeature("temp_ims_optimize")){var e=$.Deferred();return require(["js/site-catalyst-connect","js/view_layout"],function(){return e.resolve()}),e}}).then(function(){CCweb.util.isIE8OrEarlier()&&(window.location=CCweb.util.goURL("https://www.adobe.com/go/cc_IE8_support"))}).then(function(){"ja"==CCweb.config.locale&&$("html").addClass("ja-locale-fonts"),("ja"===CCweb.config.locale||"zh-tw"===CCweb.config.locale||"ko"===CCweb.config.locale)&&$("html").addClass("cjk-locale-glyphs"),CCweb.util.isTouchDevice&&$("html").addClass("touch-device")}).then(function(){CCweb.SiteCatalystConnect({events:CCweb.events,locale:CCweb.config.locale,initialize:!0})}).then(function(){var e=CCweb.util.getCookie("creative-cloud-referrer")?CCweb.util.getCookie("creative-cloud-referrer"):null;CCweb.util.setCookie("creative-cloud-referrer",-1===document.referrer.indexOf("adobelogin.com")?document.referrer:e),CCweb.util.hasFeature("performance_profiling")&&CCweb.events.trigger("auth_model:start");var t=CCweb.util.hasFeature("temp_ims_optimize")?null:$.Deferred();return CCweb.util.hasFeature("performance_profiling")&&CCweb.events.trigger("authjs_load:start"),require(["common/auth"],function(e){if(CCweb.util.hasFeature("performance_profiling")&&CCweb.events.trigger("authjs_load:end"),CCweb.models.auth=e,define("authModel",[],function(){return CCweb.models.auth}),CCweb.util.hasFeature("temp_ims_optimize")){var i=function(){CCweb.models.auth.off("ready",i),require(["common/current-user"],function(e){CCweb.models.profile=e,CCweb.events.trigger("profile_model_ready")})};CCweb.models.auth.on("ready",i)}else CCweb.models.auth.on("ready",t.resolve)}),CCweb.util.hasFeature("temp_ims_optimize")?void 0:t}).then(function(){if(!CCweb.util.hasFeature("temp_ims_optimize")){var e=$.Deferred();return require(["common/current-user","authModel"],function(t,i){CCweb.models.profile=t,i.isValid()&&!t.get("userId")?t.on("change:userId",e.resolve):e.resolve()}),e.promise()}}).then(function(){var e={plans:"plans",edeligibility:"plans",join:"plans",redeem:"plans",educard:"plans",starter:"plans",promo:"plans",team:"team",apps:"apps",inspect:"apps",addons:"exchange",dpsse:"apps",training:"training",account:"account",products:"apps",appsettings:"appsettings",login:"login",earlyaccess:"earlyaccess"},i=CCweb.util.getCurrentBasePath();t=e[i],t||(CCweb.util.hasFeature("temp_ims_optimize")?CCweb.load("page_not_found",function(){$(document.body).append((new CCweb.view_page_not_found).render("invalid url").$el)}):i?CCweb.load("page_not_found",function(){$(document.body).html((new CCweb.view_page_not_found).render("invalid url").$el)}):CCweb.models.auth.isValid()?CCweb.models.auth.get("isTeamAdmin")&&(t="team"):t="landing")}).then(function(){var e={account:["disable_account_section","disable_account_section_planned","disable_during_it_deploy","disable_during_it_planned_outage","disable_during_it_planned_outage_allow_free"],team:["disable_team_section","disable_team_section_planned","disable_during_it_deploy","disable_during_it_planned_outage","disable_during_it_planned_outage_allow_free"],plans:["disable_plans_section","disable_plans_section_planned","disable_during_it_deploy","disable_during_it_planned_outage"],apps:["disable_apps_section"],exchange:["disable_addons_section"]};for(var i in e){var a=_.intersection(CCweb.config.features,e[i]);if(i==t&&a.length>0){if(CCweb.util.hasFeature("temp_ims_optimize")||"files"!==i)t="disabled";else for(var o=CCweb.models.profile.get("countryCode"),n=0;n<a.length;n++)if("disable_files_section"===a[n]||a[n].split("_").pop()===CCweb.util.getRegionByCountry(o)){t="disabled";break}break}}}).then(function(){var e=$.Deferred(),i=CCweb.config.buildPath+"/resource/js/"+t,a=[i+"/manifest.js",i+"/router.js",i+"/tracking.js"],o=CCweb.config.locale;return"en"!=o&&"en-us"!=o&&a.push(CCweb.config.buildPath+"/resource/js/loc/"+o+"/str.js"),require(a,e.resolve),e}).then(function(){CCweb.events.bind("page_view",function(e,t){$("html").removeClass("page-view-"+CCweb.currentPage).addClass("page-view-"+e),CCweb.currentPage=e||"",CCweb.events.trigger("page_view:"+e,t),CCweb.util.hasFeature("temp_info_messaging")&&CCweb.loadInfoMessages(e)}),CCweb.events.bind("title-update",function(e,t){var i="Adobe Creative Cloud";document.title=e?t?e:e+" : "+i:i}),CCweb.events.bind("meta-description-update",function(e){var t=$("meta[name=description]");t=t.length?t:$('<meta name="description"/>').appendTo("head"),t.attr("content",e)}),CCweb.events.bind("rel-canonical-update",function(e){var t="https://creative.adobe.com",i=$("link[rel=canonical]");i=i.length?i:$('<link rel="​canonical"/>').appendTo("head"),i.attr("href",t+e)})}).then(function(){CCweb.SiteCatalystConnect({events:CCweb.events,locale:CCweb.config.locale})}).then(function(){i&&(CCweb.util.hasFeature("temp_ims_optimize")?i.$el.remove():i.remove()),CCweb.app=new CCweb.Router,define("router",[],function(){return CCweb.app});var e="/",t=CCweb.util.isLocaleInPath(CCweb.util.getCurrentPath());t&&(e+=CCweb.config.locale+"/"),CCweb.util.hasFeature("temp_ie9_backbone_routing_fix")&&CCweb.util.isIE9OrEarlier()&&CCweb.util.setCookie("ccm-isIE9OrEarlier","yes",.0014),Backbone.history.start({pushState:!0,root:e});var a=window.location.href.charAt(window.location.href.length-1);if("#"===a){var o=window.location.href;o=o.substring(0,o.length-1),o=o.replace(window.location.protocol+"//"+window.location.host,""),t&&(o=CCweb.util.getLocalizedPath(o,"en")),o="."+o,CCweb.app.navigate(o,{replace:!0})}}).then(function(){if(!CCweb.util.hasFeature("temp_ims_optimize")){var e=CCweb.util.getCookie("creative-cloud-storage-change");e>0&&_.debounce(function(){CCweb.util.setCookie("creative-cloud-storage-change",0),CCweb.load("quota_message",function(){var t=CCweb.util.translateGigabytes(e,!0),i=CCweb.util.loc("Your storage plan has been changed to {0}.{1}It may take a few minutes for you to see the update to your total storage.",t,"<br />");CCweb.events.trigger("create_notify","text",null,i)})},1e3)()}}).then(function(){if(!CCweb.util.hasFeature("temp_info_messaging")){var e=CCweb.util.getCurrentPath(),t=CCweb.util.getNoticeForPath(e);t.value&&CCweb.load("sticky_note",function(){var e=new CCweb.view_sticky_note({dismissKey:t.key,text:t.value});$(document.body).append(e.render().$el)})}CCweb.util.hasFeature("performance_profiling")&&CCweb.events.trigger("ccweb_js:end")})}};