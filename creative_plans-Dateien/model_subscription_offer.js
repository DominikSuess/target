CCweb.model_subscription_offer=Backbone.Model.extend({initialize:function(e,t){if(t=t||{},this.teamId=t.teamId,this.sync=CCweb.jil_api.sync,!this.collection.modelTeam||this.collection.modelTeam.isDirect()&&!this.collection.modelTeam.isOrderProcessing()){var i=this.getPriceCollection();i&&this.listenTo(i,"all",this.priceTableEventHandler)}this.hasPricingFailure=!1},parse:function(e,t){t=t||{};var i=_.extend({parse:!0,offerId:e.id,offer:this},t);this.teamId=t.teamId;var r={id:e.id,productCode:e.productCode,label:e.label,tags:e.tags,businessSegment:e.businessSegment,marketSegment:e.marketSegment,releaseDate:e.releaseDate,expiryDate:e.expiryDate,material:new CCweb.model_material(e,i),billing:e.billing,commitment:e.commitment,termsAndConditions:e.termsAndConditions,entitlement:e.entitlement,provisioning:e.provisioning,compliance:e.compliance,ordering:e.ordering};if(!this.collection.modelTeam||this.collection.modelTeam.isDirect()){var n;n=e.pricing&&e.pricing.data?e.pricing.data.countryPriceData:null,_.extend(r,{collectionCountryPricing:new CCweb.collection_country_prices(n,i)})}return r},priceTableEventHandler:function(e,t,i,r){this.trigger("pricecollection:"+e,t,i,r),"error"===e&&this.setPricingFailure()},getCurrency:function(){var e=this.getCountryPriceModel();return e?e.get("currency"):null},getCountryPriceModel:function(){return this.get("collectionCountryPricing").getCountryPriceModel()},getPriceCollection:function(){var e=this.getCountryPriceModel();return e?e.getPriceCollection():null},getCountryCode:function(){return this.get("material").getCountryCode()},getUnitPrice:function(){return this.getPrice(1)},getPrice:function(e){var t=this.getPriceCollection();return t?t.getPrice(e):null},getFormattedPrice:function(e){var t=e.clone();return _.each(t.keys(),function(e){t.set(e,this.formatPrice(t.get(e)))},this),t},getFormatString:function(){var e=this.getUnitPrice();return e?e.getFormatString():null},isUSCurrency:function(){return"US"===this.getCountryCode()},isJapanCurrency:function(){return"JP"===this.getCountryCode()},formatPrice:function(e){var t=!0;return CCweb.util.formatPrice(this.getFormatString(),e,this.getCurrency().usePrecision,t)},getLocalizedProductName:function(){var e=this.get("material");return e?e.getName():null},getLocalizedProductDescription:function(){var e=this.get("material");return e?e.getDescription():null},getSKU:function(){var e=this.get("material");return e?e.getSKU():null},getRenewalSKU:function(){var e=this.get("material");return e?e.getRenewalSKU():null},getOrderingDataField:function(e){var t=this.get("ordering"),i=t?t.data:null;return i&&i[e]?i[e]:""},getProductKey:function(){return this.getOrderingDataField("productKey")},getLanguageCode:function(){return this.getOrderingDataField("languageCode")},getServiceCommitment:function(){return this.getOrderingDataField("serviceCommitment")},setPricingFailure:function(){this.hasPricingFailure=!0,CCweb.util.hasFeature("temp_offer_error_handling")||this.trigger("pricecollection:error")}});