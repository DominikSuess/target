define(["utils","events"],function(e,t){var n,r=[],i="none",o=0,u=function(t,n){if(t&&!e.hasFeature("disable-client-logging"))if("ets"===t){if(!e.hasFeature("temp_ets"))return;c(n)}else s(t,n)},s=function(u,s){s=s||{},s.prior=i,s.event=u,s._cb=o++,n="undefined"==typeof n?e.getParam("cc_source"):n,n&&(s.source=n),i=u;var c=document.createElement("img");c.src="/log.gif?"+$.param(s),r.push(s),t.trigger("logs-updated")},c=function(e){require(["common/utils/ets"],function(t){t.etsSendEvent(e).fail(function(e){s("etsLog:error",e)})})};return u.getLogs=function(){return r},u});