CCweb.view_plans_footer=Backbone.View.extend({className:"tab_footer",events:{"change select.cur-switch":"currencySelected"},initialize:function(e){e=e||{},this.showEdu=e.showEdu||!1,this.showIndividual=e.showIndividual||!1,this.showTeam=e.showTeam||!1,this.showEduInst=e.showEduInst||!1,_.bindAll(this,"render","currencySelected","onClose"),this.currencyTemplate=_.template('<div class="currency_dropdown"><label for="cur-switch"><%= CCweb.util.loc("Select currency:") %></label>  <select id="cur-switch" class="cur-switch"> '+(CCweb.util.hasFeature("temp_consolidate_currency_dropdown")?CCweb.util.getCurrencyOptions():'<option value="us" selected><%= CCweb.util.loc("US Dollar ({0})", CCweb.util.currencySymbols.us) %></option><option value="dz"><%= CCweb.util.loc("Algeria - US Dollar ({0})", CCweb.util.currencySymbols.dz) %></option><option value="ar"><%= CCweb.util.loc("Argentine Peso ({0})", CCweb.util.currencySymbols.ar) %></option><option value="am"><%= CCweb.util.loc("Armenia - US Dollar ({0})", CCweb.util.currencySymbols.am) %></option><option value="au"><%= CCweb.util.loc("Australian Dollar ({0})", CCweb.util.currencySymbols.au) %></option><option value="az"><%= CCweb.util.loc("Azerbaijan - US Dollar ({0})", CCweb.util.currencySymbols.az) %></option><option value="bh"><%= CCweb.util.loc("Bahraini Dinar ({0})", CCweb.util.currencySymbols.bh) %></option><option value="by"><%= CCweb.util.loc("Belarus - US Dollar ({0})", CCweb.util.currencySymbols.by) %></option><option value="br"><%= CCweb.util.loc("Brazilian Real ({0})", CCweb.util.currencySymbols.br) %></option><option value="gb"><%= CCweb.util.loc("British Pound Sterling ({0})", CCweb.util.currencySymbols.gb) %></option><option value="cl"><%= CCweb.util.loc("Chilean Peso ({0})", CCweb.util.currencySymbols.cl) %></option><option value="co"><%= CCweb.util.loc("Colombian Peso ({0})", CCweb.util.currencySymbols.co) %></option><option value="cr"><%= CCweb.util.loc("Costa Rica - US Dollar ({0})", CCweb.util.currencySymbols.cr) %></option><option value="dk"><%= CCweb.util.loc("Danish Krone ({0})", CCweb.util.currencySymbols.dk) %></option><option value="ec"><%= CCweb.util.loc("Ecuador - US Dollar ({0})", CCweb.util.currencySymbols.ec) %></option><option value="eg"><%= CCweb.util.loc("Egyptian Pound ({0})", CCweb.util.currencySymbols.eg) %></option><option value="de"><%= CCweb.util.loc("Euro ({0})", CCweb.util.currencySymbols.de) %></option><option value="ge"><%= CCweb.util.loc("Georgia - US Dollar ({0})", CCweb.util.currencySymbols.ge) %></option><option value="gt"><%= CCweb.util.loc("Guatemala - US Dollar ({0})", CCweb.util.currencySymbols.gt) %></option><option value="hk"><%= CCweb.util.loc("Hong Kong Dollar ({0})", CCweb.util.currencySymbols.hk) %></option><option value="in"><%= CCweb.util.loc("Indian Rupee ({0})", CCweb.util.currencySymbols.in) %></option><option value="id"><%= CCweb.util.loc("Indonesian Rupiah ({0})", CCweb.util.currencySymbols.id) %></option><option value="il"><%= CCweb.util.loc("Israeli New Sheqel ({0})", CCweb.util.currencySymbols.il) %></option><option value="jp"><%= CCweb.util.loc("Japanese Yen ({0})", CCweb.util.currencySymbols.jp) %></option><option value="jo"><%= CCweb.util.loc("Jordanian Dinar ({0})", CCweb.util.currencySymbols.jo) %></option><option value="kz"><%= CCweb.util.loc("Kazakhstan - US Dollar ({0})", CCweb.util.currencySymbols.kz) %></option><option value="kr"><%= CCweb.util.loc("Korean Won ({0})", CCweb.util.currencySymbols.kr) %></option><option value="kw"><%= CCweb.util.loc("Kuwaiti Dinar ({0})", CCweb.util.currencySymbols.kw) %></option><option value="kg"><%= CCweb.util.loc("Kyrgyzstan - US Dollar ({0})", CCweb.util.currencySymbols.kg) %></option><option value="lb"><%= CCweb.util.loc("Lebanese Pound ({0})", CCweb.util.currencySymbols.lb) %></option><option value="my"><%= CCweb.util.loc("Malaysian Ringgit ({0})", CCweb.util.currencySymbols.my) %></option><option value="md"><%= CCweb.util.loc("Moldova - US Dollar ({0})", CCweb.util.currencySymbols.md) %></option><option value="ma"><%= CCweb.util.loc("Morocco - US Dollar ({0})", CCweb.util.currencySymbols.ma) %></option><option value="no"><%= CCweb.util.loc("Norwegian Krone ({0})", CCweb.util.currencySymbols.no) %></option><option value="om"><%= CCweb.util.loc("Omani Rial ({0})", CCweb.util.currencySymbols.om) %></option><option value="pe"><%= CCweb.util.loc("Peruvian Nuevo Sol ({0})", CCweb.util.currencySymbols.pe) %></option><option value="ph"><%= CCweb.util.loc("Philippine Peso ({0})", CCweb.util.currencySymbols.ph) %></option><option value="qa"><%= CCweb.util.loc("Qatari Rial ({0})", CCweb.util.currencySymbols.qa) %></option><option value="ru"><%= CCweb.util.loc("Russian Ruble ({0})", CCweb.util.currencySymbols.ru) %></option><option value="sa"><%= CCweb.util.loc("Saudi Riyal ({0})", CCweb.util.currencySymbols.sa) %></option><option value="sg"><%= CCweb.util.loc("Singapore Dollar ({0})", CCweb.util.currencySymbols.sg) %></option><option value="za"><%= CCweb.util.loc("South Africa - US Dollar ({0})", CCweb.util.currencySymbols.za) %></option><option value="se"><%= CCweb.util.loc("Swedish Krona ({0})", CCweb.util.currencySymbols.se) %></option><option value="ch"><%= CCweb.util.loc("Swiss Franc ({0})", CCweb.util.currencySymbols.ch) %></option><option value="tw"><%= CCweb.util.loc("New Taiwan Dollar ({0})", CCweb.util.currencySymbols.tw) %></option><option value="tj"><%= CCweb.util.loc("Tajikistan - US Dollar ({0})", CCweb.util.currencySymbols.tj) %></option><option value="th"><%= CCweb.util.loc("Thai Baht ({0})", CCweb.util.currencySymbols.th) %></option><option value="tn"><%= CCweb.util.loc("Tunisia - US Dollar ({0})", CCweb.util.currencySymbols.tn) %></option><option value="tr"><%= CCweb.util.loc("Turkish Lira ({0})", CCweb.util.currencySymbols.tr) %></option><option value="tm"><%= CCweb.util.loc("Turkmenistan - US Dollar ({0})", CCweb.util.currencySymbols.tm) %></option><option value="ua"><%= CCweb.util.loc("Ukraine - US Dollar ({0})", CCweb.util.currencySymbols.ua) %></option><option value="ae"><%= CCweb.util.loc("United Arab Emirates Dirham ({0})", CCweb.util.currencySymbols.ae) %></option><option value="uz"><%= CCweb.util.loc("Uzbekistan - US Dollar ({0})", CCweb.util.currencySymbols.uz) %></option><option value="ve"><%= CCweb.util.loc("Venezuela - US Dollar ({0})", CCweb.util.currencySymbols.ve) %></option><option value="ye"><%= CCweb.util.loc("Yemen - US Dollar ({0})", CCweb.util.currencySymbols.ye) %></option>')+"</select></div>"),this.taxInfoTemplate=_.template('<div class="tax_info_footnote"><%= CCweb.util.loc("All prices subject to applicable local taxes.") %></div>'),this.individualTemplate=_.template('<div class="contact_info"><div id="lpChatDiv"></div><div class="ind_order_footnote"><%= contactInfo %></div></div>'),this.eduTemplate=_.template('<div class="contact_info"><div id="lpChatEduDiv"></div><div class="edu_order_footnote"><%= contactInfo %></div></div>'),this.teamTemplate=_.template(CCweb.util.hasFeature("temp_plans_purchase_orders")?'<div class="contact_info"><div class="chatpod_po" id="lpChatTeamDiv"></div><span class="mobile_line_break"></span><div class="team_order_footnote_new"><%= contactInfo %><span class="po_footnote"><%= purchaseOrderFootnote %></span></div><span class="mobile_line_break"></span><div class="team_consult_info"><a class="team_consult">'+CCweb.util.loc("Request a consultation")+"</a></div></div>":'<div class="contact_info"><div id="lpChatTeamDiv"></div><div class="team_order_footnote"><%= contactInfo %></div></div>'),this.eduInstTemplate=_.template(CCweb.util.hasFeature("temp_plans_purchase_orders")?'<div class="contact_info"><div class="chatpod_po" id="lpChatEduTeamDiv"></div><span class="mobile_line_break"></span><div class="edu_inst_order_footnote_new"><%= contactInfo %><span class="po_footnote"><%= purchaseOrderFootnote %></span></div><span class="mobile_line_break"></span><div class="edu_inst_consult_info"><a class="edu_inst_consult" href="'+CCweb.util.goURL("https://www.adobe.com/go/edu_consultation")+'" target="_blank">'+CCweb.util.loc("Request a consultation")+"</a></div></div>":'<div class="contact_info"><div id="lpChatEduTeamDiv"></div><div class="edu_inst_order_footnote"><%= contactInfo %></div></div>'),this.paymentMethodTemplate=_.template('<div class="payment_method_footnote"></div>'),this.paymentMethodInfoTemplate=_.template('<div class="payment_info_footnote">'+CCweb.util.loc("Bank Transfer & Convenience Store payment options only available for Annual plan, prepaid.")+"</div>"),CCweb.models.currency.on("change:currency",this.render,this)},render:function(){this.$el.empty();var e,t;CCweb.util.hasFeature("temp_plans_purchase_orders")&&(e=this.getCountryCode(),t=e?e:CCweb.models.currency.get("currency")),this.showIndividual?this.$el.append(this.individualTemplate({contactInfo:this.getIndividualContactInfo()})):this.showEdu?this.$el.append(this.eduTemplate({contactInfo:this.getIndividualContactInfo()})):this.showTeam?CCweb.util.hasFeature("temp_plans_purchase_orders")?(this.$el.append(this.teamTemplate({contactInfo:this.getTeamContactInfoNew(e),purchaseOrderFootnote:CCweb.util.isPOAvailable(t)?CCweb.util.loc("Purchase orders available"):""})),this.addTeamConsultationURL(e)):this.$el.append(this.teamTemplate({contactInfo:this.getTeamContactInfo()})):this.showEduInst&&this.$el.append(CCweb.util.hasFeature("temp_plans_purchase_orders")?this.eduInstTemplate({contactInfo:this.getEduInstContactInfoNew(e),purchaseOrderFootnote:CCweb.util.isPOAvailable(t)?CCweb.util.loc("Purchase orders available"):""}):this.eduInstTemplate({contactInfo:this.getEduInstContactInfo()})),this.$el.append('<div class="payment_info"></div>'),this.$(".payment_info").append(this.paymentMethodTemplate()),CCweb.util.hasFeature("temp_plans_purchase_orders")?this.renderPaymentMethodIconsNew(e):this.renderPaymentMethodIcons();var o=CCweb.models.currency.get("currency");return CCweb.util.isVATCountry(o)||_.contains(["au","jp"],o)||this.$(".payment_info").append(this.taxInfoTemplate()),this.$(".payment_info").append(this.currencyTemplate()),this.$(".cur-switch").val(CCweb.models.currency.get("currency")),this},renderPaymentMethodIconsNew:function(e){e||"au"!==CCweb.models.currency.get("currency")||(e=CCweb.models.currency.get("currency")),(this.showIndividual||this.showEdu)&&"jp"===e&&this.$(".payment_info").prepend(this.paymentMethodInfoTemplate());var t=this.getIconsForCountry(e);t?this.$(".payment_method_footnote").append($(t)):this.$(".payment_method_footnote").hide()},renderPaymentMethodIcons:function(){var e="",t=CCweb.util.getParam("store_code");CCweb.models.auth.isValid()&&CCweb.models.profile&&CCweb.models.profile.get("countryCode")?e=CCweb.models.profile.get("countryCode").toLowerCase():!t||CCweb.util.hasFeature("ccm_bug_fix")&&!CCweb.util.isValidCountry(t)?CCweb.models.ip_profile&&CCweb.models.ip_profile.getValidCountryCode()?(e=CCweb.models.ip_profile.getValidCountryCode(),e&&e.length>0&&(e=e.toLowerCase())):(e=CCweb.models.currency.get("currency"),"de"===e&&(e="")):e=t.toLowerCase(),(this.showIndividual||this.showEdu)&&"jp"===e&&this.$(".payment_info").prepend(this.paymentMethodInfoTemplate());var o=this.getIconsForCountry(e);o?this.$(".payment_method_footnote").append($(o)):this.$(".payment_method_footnote").hide()},getIndividualContactInfo:function(){var e=CCweb.models.currency.get("currency"),t=CCweb.util.individualSalesContactPhoneMap[e];if(t){var o=t[CCweb.config.locale]||t.en;switch(e){case"ch":case"de":case"dk":case"gb":case"no":case"se":case"za":return CCweb.util.loc("Click {0}here{1}.",'<a href="'+CCweb.util.goURL("http://www.adobe.com/go/AdobeSalesEMEA")+'" target="_blank">',"</a>");case"au":return o?CCweb.util.loc("{0} (Australia) or {1} (New Zealand).",'<div class="desktop">'+o[0]+'</div><a class="mobile" href="tel:'+o[0]+'">'+o[0]+"</a>",'<div class="desktop">'+o[1]+'</div><a class="mobile" href="tel:'+o[1]+'">'+o[1]+"</a>"):"";default:return o?'<div class="desktop">'+o+'</div><a class="mobile" href="tel:'+o+'">'+o+"</a>":""}}},getTeamContactInfoNew:function(e){var t,o="";if(e){var l=CCweb.util.businessSalesContactPhoneMap[e];l&&(t='<div class="desktop">'+l+'</div><a class="mobile" href="tel:'+l+'">'+l+"</a>")}else{var i=CCweb.models.currency.get("currency");if("de"===i)t=CCweb.util.loc("Click {0}here{1}.",'<a href="'+CCweb.util.goURL("http://www.adobe.com/go/AdobeSalesEMEA")+'" target="_blank">',"</a>");else if("au"===i){var a=CCweb.util.businessSalesContactPhoneMap.au,n=CCweb.util.businessSalesContactPhoneMap.nz;a&&n&&(t=CCweb.util.loc("{0} (Australia) or {1} (New Zealand).",'<div class="desktop">'+a+'</div><a class="mobile" href="tel:'+a+'">'+a+"</a>",'<div class="desktop">'+n+'</div><a class="mobile" href="tel:'+n+'">'+n+"</a>"))}}return t&&(o='<div class="phone_container">'+t+"</div>"),o},getTeamContactInfo:function(){var e=CCweb.models.currency.get("currency"),t=CCweb.util.teamSalesContactPhoneMap[e];if(t){var o=t?t[CCweb.config.locale]||t.en:null;switch(e){case"de":return CCweb.util.loc("Click {0}here{1}.",'<a href="'+CCweb.util.goURL("http://www.adobe.com/go/AdobeSalesEMEA")+'" target="_blank">',"</a>");case"au":return o?CCweb.util.loc("{0} (Australia) or {1} (New Zealand).",'<div class="desktop">'+o[0]+'</div><a class="mobile" href="tel:'+o[0]+'">'+o[0]+"</a>",'<div class="desktop">'+o[1]+'</div><a class="mobile" href="tel:'+o[1]+'">'+o[1]+"</a>"):"";default:return o?'<div class="desktop">'+o+'</div><a class="mobile" href="tel:'+o+'">'+o+"</a>":""}}},getEduInstContactInfoNew:function(e){var t,o="";if(e){var l=CCweb.util.eduInstSalesContactPhoneMapNew[e];l&&(t='<div class="desktop">'+l+'</div><a class="mobile" href="tel:'+l+'">'+l+"</a>")}else{var i=CCweb.models.currency.get("currency");if("de"===i)t=CCweb.util.loc("Click {0}here{1}.",'<a href="'+CCweb.util.goURL("http://www.adobe.com/go/AdobeSalesEMEA")+'" target="_blank">',"</a>");else if("au"===i){var a=CCweb.util.eduInstSalesContactPhoneMapNew.au,n=CCweb.util.eduInstSalesContactPhoneMapNew.nz;a&&n&&(t=CCweb.util.loc("{0} (Australia) or {1} (New Zealand).",'<div class="desktop">'+a+'</div><a class="mobile" href="tel:'+a+'">'+a+"</a>",'<div class="desktop">'+n+'</div><a class="mobile" href="tel:'+n+'">'+n+"</a>"))}}return t&&(o='<div class="phone_container">'+t+"</div>"),o},getEduInstContactInfo:function(){var e=CCweb.models.currency.get("currency"),t=CCweb.util.eduSalesContactPhoneMap[e];switch(e){case"de":return CCweb.util.loc("Click {0}here{1}.",'<a href="'+CCweb.util.goURL("http://www.adobe.com/go/AdobeSalesEMEA")+'" target="_blank">',"</a>");case"au":return t?CCweb.util.loc("{0} (Australia) or {1} (New Zealand).",'<div class="desktop">'+t[0]+'</div><a class="mobile" href="tel:'+t[0]+'">'+t[0]+"</a>",'<div class="desktop">'+t[1]+'</div><a class="mobile" href="tel:'+t[1]+'">'+t[1]+"</a>"):"";default:return t?'<div class="desktop">'+t+'</div><a class="mobile" href="tel:'+t+'">'+t+"</a>":""}},getIconsForCountry:function(e){if(!e)return null;var t="",o=CCweb.util.countryPaymentMethodsMap[e];if(o){var l=this.showTeam||this.showEduInst,i=l?o.team:o.individual,a=this;_.each(i,function(e){var o=a.getIconClassForPaymentMethod(e);o&&(t+='<div class="'+o+'"/>')})}return t},getIconClassForPaymentMethod:function(e){switch(e){case"visa":return"payment_icon_visa";case"mastercard":return"payment_icon_mastercard";case"amex":return"payment_icon_amex";case"jcb":return"payment_icon_jcb";case"directdebit_de":return"payment_icon_directdebit_de";case"cartebleue":return"payment_icon_carte_bleue";case"paypal":return"payment_icon_paypal";case"jp_bank":return"payment_icon_jp_bank_transfer";case"jp_store":return"payment_icon_jp_conv_store"}return""},addTeamConsultationURL:function(e){var t;t=e&&CCweb.util.isValidCountry(e)?CCweb.util.currencyMap[e.toLowerCase()]:CCweb.models.currency.get("currency");var o,l="https://www.adobe.com/go/CCT_Consult";o=_.contains(["au","sg","my","th","id","ph","in","hk","tw","kr","ch","dk","de","gb","no","se"],t)?CCweb.util.goURL(l,null,t):CCweb.util.goURL(l),this.$("a.team_consult").attr("href",o).attr("target","_blank")},getCountryCode:function(){var e="",t=CCweb.util.getParam("store_code");if(CCweb.models.auth.isValid()&&CCweb.models.profile&&CCweb.models.profile.get("countryCode"))e=CCweb.models.profile.get("countryCode").toLowerCase();else if(t&&CCweb.util.isValidCountry(t))e=t.toLowerCase();else if(CCweb.models.ip_profile&&CCweb.models.ip_profile.getValidCountryCode()){var o=CCweb.models.ip_profile.getValidCountryCode();o&&o.length>0&&(e=o.toLowerCase())}else e=CCweb.models.currency.get("currency"),("de"===e||"au"===e)&&(e=null);return e},currencySelected:function(){CCweb.models.currency.set("currency",this.$(".cur-switch").val()),CCweb.LpChatPod.reloadChatPod()},onClose:function(){CCweb.models.currency.off("change:currency",this.render,this)}});