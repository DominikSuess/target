CCweb.view_purchase_progress_indicator=Backbone.View.extend({className:"progress_indicator",initialize:function(t){t=t||{},this.model=t.model,this.type=t.type;var e=CCweb.util.getResourcePath(CCweb.util.supportsRetinaDisplay?"/resource/img/plans/start_user_icon-2x.png":"/resource/img/plans/start_user_icon.png"),s=CCweb.util.getResourcePath(CCweb.util.supportsRetinaDisplay?"/resource/img/plans/select_apps_icon-2x.png":"/resource/img/plans/select_apps_icon.png"),i=CCweb.util.getResourcePath(CCweb.util.supportsRetinaDisplay?"/resource/img/plans/checkout_icon-2x.png":"/resource/img/plans/checkout_icon.png"),a=CCweb.util.getResourcePath(CCweb.util.supportsRetinaDisplay?"/resource/img/plans/assign_icon-2x.png":"/resource/img/plans/assign_icon.png"),n=CCweb.util.getResourcePath(CCweb.util.supportsRetinaDisplay?"/resource/img/plans/progress_indicator_line-2x.png":"/resource/img/plans/progress_indicator_line.png");this.template=_.template('<div class="progress_step start current"><div class="icon"><a><img src="'+e+'" /></a></div><div class="subtext"><a>'+CCweb.util.loc("Start")+'</a></div></div><div class="divider"><img src="'+n+'" /></div><div class="progress_step select inactive"><div class="icon"><a><img src="'+s+'" /></a></div><div class="subtext"><a>'+CCweb.util.loc("Select Apps")+'</a></div></div><div class="divider"><img src="'+n+'" /></div><div class="progress_step checkout inactive"><div class="icon"><a><img src="'+i+'" /></a></div><div class="subtext"><a>'+CCweb.util.loc("Checkout")+'</a></div></div><div class="divider"><img src="'+n+'" /></div><div class="progress_step assign inactive"><div class="icon"><a><img src="'+a+'" /></a></div><div class="subtext"><a>'+CCweb.util.loc("Assign")+"</a></div></div>"),_.bindAll(this,"switchBackToStepOne","switchBackToStepTwo","redirectToPlansStep1","redirectToPlansStep2"),this.model.bind("change:step",this.switchStep,this)},render:function(){return this.$el.empty().append(this.template()),this.switchStep(),this.delegateEvents(),this},unbindEvents:function(){this.$(".start").off(),this.$(".select").off()},disableSteps:function(){this.$(".progress_step").removeClass("current active").addClass("inactive"),this.$(".progress_step a").removeAttr("href")},switchStep:function(){var t=this.model.get("step");switch(t){case 1:this.switchToStepOne();break;case 2:this.switchToStepTwo();break;case 3:this.switchToStepThree()}},switchToStepOne:function(){this.unbindEvents(),this.disableSteps(),this.$(".start").removeClass("inactive").addClass("current")},switchToStepTwo:function(){this.unbindEvents(),this.disableSteps(),this.$(".select").removeClass("inactive").addClass("current"),this.$(".start").removeClass("inactive").addClass("active"),this.$(".start").on("click",this.switchBackToStepOne)},switchToStepThree:function(){this.unbindEvents(),this.disableSteps(),this.$(".checkout").removeClass("inactive").addClass("current"),this.$(".select").removeClass("inactive").addClass("active"),this.$(".start").removeClass("inactive").addClass("active"),CCweb.util.hasFeature("temp_plans_join_interaction")?(this.$(".start").on("click",this.switchBackToStepOne),this.$(".select").on("click",this.switchBackToStepTwo)):(this.$(".start").on("click",this.redirectToPlansStep1),this.$(".select").on("click",this.redirectToPlansStep2))},switchBackToStepOne:function(){this.model.set("step",1)},switchBackToStepTwo:function(){this.model.set("step",2)},getPlanTabId:function(){var t;return t="edu"===this.type?"edu_inst":"team"},redirectToPlansStep1:function(){if(CCweb.util.hasFeature("temp_plans_url_functions")){var t=new CCweb.url(CCweb.util.getLocalizedPath("/plans"),{ignoreRoot:!0}).addParam("plan",this.getPlanTabId()).addParam("step","1");window.location=t.toString()}else window.location=CCweb.util.getLocalizedPath("/plans?plan="+this.getPlanTabId()+"&step=1");return!1},redirectToPlansStep2:function(){if(CCweb.util.hasFeature("temp_plans_url_functions")){var t=new CCweb.url(CCweb.util.getLocalizedPath("/plans"),{ignoreRoot:!0}).addParam("plan",this.getPlanTabId()).addParam("step","2");window.location=t.toString()}else window.location=CCweb.util.getLocalizedPath("/plans?plan="+this.getPlanTabId()+"&step=2");return!1}});