CCweb.view_tab_panel_factory={create:function(e,t){var s=e.get("id");switch(s){case"individual":return new CCweb.view_tab_panel_individual({model:e,collectionPlans:t});case"team":return new CCweb.view_tab_panel_team({model:e,collectionPlans:t});case"edu_inst":return new CCweb.view_tab_panel_edu_inst({model:e,collectionPlans:t});case"edu":return new CCweb.view_tab_panel_edu({model:e,collectionPlans:t});default:return null}}},CCweb.view_tab_panel_base=Backbone.View.extend({className:"tab_panel",attributes:{style:"display: none"},initialize:function(e){this.collectionPlans=e.collectionPlans,this.childViews=[],_.bindAll(this,"render","onClose"),this.template=_.template('<div class="tab_panel_content"></div><div class="tab_panel_footer"></div>'),this.modelPlans=this.collectionPlans.getOffersByTab(this.model.get("id")),this.viewFooter=new CCweb.view_plans_footer({showEdu:this.showEdu,showIndividual:this.showIndividual,showTeam:this.showTeam,showEduInst:this.showEduInst}).render(),CCweb.models.currency.on("change:currency",this.render,this)},render:function(){return this.viewFooter&&this.viewFooter.$el.detach(),this.$el.html(this.template()),this.$(".tab_panel_footer").append(this.viewFooter.$el),this},onClose:function(){this.viewFooter.close(),_.each(this.childViews,function(e){e.close()}),this.childViews.length=0}}),CCweb.view_tab_panel=Backbone.View.extend({className:"tab_panel",attributes:{style:"display:none"},initialize:function(e){this.collectionPlans=e.collectionPlans,this.childViews=[],_.bindAll(this,"render","onClose"),this.dividerTemplate=_.template('<div class="hrule" />'),this.modelPlans=this.collectionPlans.getOffersByTab(this.model.get("id")),this.viewFooter=new CCweb.view_plans_footer({showEdu:this.showEdu,showIndividual:this.showIndividual,showTeam:this.showTeam,showEduInst:this.showEduInst}).render(),CCweb.models.currency.on("change:currency",this.render,this),this.model.on("change:eduServiceCommitment",this.render,this)},adjustHeights:function(e,t){var s=0,a=!1;if(e=e?0>e?0:e:0,_.every(this.planViews,function(e){e.height("auto");var t=e.height();return s=Math.max(s,t),!(a=0===t)}),a){if(e){var i=this;setTimeout(function(){i.adjustHeights(e-1,t)},t?t:100)}}else _.each(this.planViews,function(e){e.hasClass("free_plan")||e.height(s)})},render:function(){var e=this.$("div").eq(0),t=this;return t.planViews=[],_.each(this.modelPlans,function(s){var a=t.createViewPlan(s);if(a){var i=a.render().$el;t.planViews.push(i),"free"===s.get("templateType")?e.prepend(i):e.append(i),t.childViews.push(a),a.on("sizeChanged",function(){t.adjustHeights(20,100)})}}),t.$el.is(":visible")&&_.defer(function(){t.adjustHeights(20,100)}),this.$el.append(this.viewFooter.$el),this},createViewPlan:function(e){return CCweb.view_plan_factory.create(e)},onClose:function(){CCweb.models.currency.off("change:currency",this.render,this),this.model.off("change:eduServiceCommitment",this.render,this),this.viewFooter.close(),_.each(this.childViews,function(e){e.close()}),this.childViews.length=0}}),CCweb.view_tab_panel_two_step=CCweb.view_tab_panel_base.extend({className:CCweb.view_tab_panel_base.prototype.className,initialize:function(e){this.stepOneTemplate=_.template('<div class="step step_one" />'),this.stepTwoTemplate=_.template('<div class="step step_two" />'),this.stepModel=new CCweb.model_step_progress,this.stepModel.bind("change:step",this.showAppropriateStep,this),_.bindAll(this,"switchToPreviousStep"),CCweb.view_tab_panel_base.prototype.initialize.call(this,e)},render:function(){return CCweb.view_tab_panel_base.prototype.render.call(this),this.$(".tab_panel_content").append(this.stepOneTemplate()).append(this.stepTwoTemplate()),this.showAppropriateStep(),this},showAppropriateStep:function(){var e=this.stepModel.get("step");switch(e){case 1:this.$(".step_two").hide(),this.$(".step_one").show();break;case 2:this.$(".step_one").hide(),this.$(".step_two").show()}},switchToPreviousStep:function(){var e=this.stepModel.get("step");e>1&&this.stepModel.set("step",e-1)},setStep:function(e){this.stepModel.set("step",e)},getDefaultCountryCode:function(){var e="",t=CCweb.util.getParam("store_code");if(CCweb.models.auth.isValid()&&CCweb.models.profile&&CCweb.models.profile.get("countryCode"))e=CCweb.models.profile.get("countryCode").toLowerCase();else if(t&&CCweb.util.isValidCountry(t))e=t.toLowerCase();else if(CCweb.models.ip_profile&&CCweb.models.ip_profile.getValidCountryCode()){var s=CCweb.models.ip_profile.getValidCountryCode();s&&s.length>0&&(e=s.toLowerCase())}else e=CCweb.models.currency.get("currency"),("de"===e||"au"===e)&&(e=null);return e},onClose:function(){this.stepModel.unbind("change:step",this.showAppropriateStep),CCweb.view_tab_panel_base.prototype.onClose.call(this)}}),CCweb.view_tab_panel_individual=CCweb.view_tab_panel.extend({className:CCweb.view_tab_panel.prototype.className+" individual_plans",initialize:function(e){this.template=_.template('<div class="plans_list" />'),this.showIndividual=!0,CCweb.view_tab_panel.prototype.initialize.call(this,e)},render:function(){return this.viewFooter&&this.viewFooter.$el.detach(),this.$el.empty().append(this.template()),CCweb.view_tab_panel.prototype.render.call(this),this}}),CCweb.view_tab_panel_team=CCweb.view_tab_panel_two_step.extend({className:CCweb.view_tab_panel_two_step.prototype.className+" team_plans",events:{"click .plan_option":"onPlanOptionClick","keyup .plan_option":"onPlanOptionKeyUp"},initialize:function(e){this.showTeam=!0,CCweb.view_tab_panel_two_step.prototype.initialize.call(this,e);var t="stage"===CCweb.config.ccm_env,s=t?"http://www.adobe.com/go/stage_learn_more_business":"http://www.adobe.com/go/prod_learn_more_business",a=t?"http://www.adobe.com/go/stage_learn_more_enterprise":"http://www.adobe.com/go/prod_learn_more_enterprise";this.stepOneSkeletonTemplate=_.template('<div class="step_one_content" /><div class="step_one_sidebar" />'),this.stepOneContentTemplate=_.template('<div class="step_one_header"><div class="team_intro_text"><h1>'+CCweb.util.loc("Small &amp; Medium Businesses")+"</h1><p>"+(CCweb.util.hasFeature("temp_plans_purchase_orders")?CCweb.util.loc("Purchase {0}Creative Cloud for teams{1} Complete and Single App licenses for up to {2} people.",'<a href="'+s+'" class="learn_more">',"</a>",'<span class="team_max_licenses">150</span>'):CCweb.util.loc("Purchase Creative Cloud for teams complete and single app licenses for up to {0} people.",'<span class="team_max_licenses">150</span>'))+'</p></div><div class="team_progress" /></div><div class="hrule" /><div class="step_one_plans"><div class="plan_selector" /><div class="plan_content" /></div>'),this.stepTwoContentTemplate=_.template('<div class="step_two_content"><p><a class="step_two_back">'+CCweb.util.loc("&#x2039;&nbsp;Back")+'</a></p><div class="step_two_header"><div class="team_intro_text"><h1>'+CCweb.util.loc("Select the apps you want")+"</h1><p>"+CCweb.util.loc("You can always add more later")+'</p></div><div class="team_progress" /></div><div class="hrule" /><div class="cart_widget" />'+(CCweb.util.hasFeature("temp_plans_purchase_orders")?"":'<div class="team_questions"><h2>'+CCweb.util.loc("Have questions?")+'</h2><div class="phone_orders" /><p><a href="'+s+'" class="learn_more">'+CCweb.util.loc("Learn more about Creative Cloud for teams&nbsp;&#x203A;")+'</a></p><p><a class="team_consult">'+CCweb.util.loc("Request a consultation&nbsp;&#x203A;")+"</a></p></div>")+"</div>"),this.sidebarTemplate=_.template('<div class="large_org"><h1>'+CCweb.util.loc("Buying for a larger organization?")+"</h1><p>"+CCweb.util.loc("{0}Creative Cloud for enterprise{1} offers customized licensing for large organizations. Get the latest creative desktop and mobile apps and services, collaboration, license management tools, and enterprise-level support. Ask for a Creative Cloud for enterprise evaluation trial today.",'<a class="ent_learn_more" href="'+a+'" target="_blank">',"</a>")+'</p><p class="ent_consult_details"><span class="ent_consult_phone" /><br /><a class="enterprise_consult">'+CCweb.util.loc("Request a consultation&nbsp;&#x203A;")+"</a></p></div>"+(CCweb.util.hasFeature("temp_plans_purchase_orders")?"":'<div class="hrule" /><div class="team_questions"><h2>'+CCweb.util.loc("Have questions?")+'</h2><p><a class="learn_more" href="'+s+'">'+CCweb.util.loc("Learn more about Creative Cloud for teams.")+'</a></p><p class="business_consult_details"><span class="phone_orders" /><br /><a class="business_consult">'+CCweb.util.loc("Request a consultation&nbsp;&#x203A;")+"</a></p></div>")),this.optionsSelectorTemplate=_.template('<div class="plan_option <%= className %>" tabindex="0"><div class="select_plan_radio"><input type="radio" class="select_plan" name="plan_option" value=<%= value %>></div><div class="plan_titles"><h2 class="plan_title"><%= title %></h2><div class="plan_subtitle"><%= subtitle %></div></div></div>'),this.unsupportedRegionOverlayTemplate=_.template('<div class="unsupported_overlay"><div class="unsupported_overlay_text"><p><%= CCweb.util.loc("Creative Cloud for teams is sold through authorized resellers in your region.") %></p></div><div class="unsupported_overlay_action"><a class="btn primary unsupported_overlay_btn"><%= CCweb.util.loc("Find a Reseller") %></a></div></div>'),this.progressIndicatorView=CCweb.view_progress_indicator_team=CCweb.view_progress_indicator_team||new CCweb.view_purchase_progress_indicator({model:this.stepModel}),this.createCartModel(),_.bindAll(this,"switchPlan"),this.stepModel.on("change:step",this.onStepChange,this)},render:function(){if(CCweb.view_tab_panel_two_step.prototype.render.call(this),this.createPlanMap(),this.isUnsupportedRegion())this.renderStepOneContent(),this.renderUnsupportedRegionOverlay(),CCweb.util.hasFeature("temp_plans_purchase_orders")?this.renderEntPhoneNumbersNew():(this.renderTeamPhoneNumbers(),this.renderEntPhoneNumbers()),this.stepModel.set("step",1);else if(this.cartWidgetView=this.cartWidgetView||new CCweb.view_cart_widget({cartModel:this.cartModel,stepModel:this.stepModel}),this.cartWidgetView.render(),this.renderStepOneContent(),this.renderStepTwoContent(),this.renderProgressIndicatorBar(),CCweb.util.hasFeature("temp_plans_purchase_orders")?this.renderEntPhoneNumbersNew():(this.renderTeamPhoneNumbers(),this.renderEntPhoneNumbers()),this.checkForUrlParams(),this.$el.is(":visible")){var e=this;_.defer(function(){e.adjustBannerHeight(20,100)})}return this},isUnsupportedRegion:function(){var e,t=!0,s=CCweb.models.currency.get("currency");if(CCweb.models.auth.isValid()&&CCweb.models.profile)e=CCweb.models.profile.get("countryCode").toLowerCase();else{var a=CCweb.util.getParam("store_code");!a||CCweb.util.hasFeature("ccm_bug_fix")&&!CCweb.util.isValidCountry(a)?CCweb.models.ip_profile.getValidCountryCode()&&(e=CCweb.models.ip_profile.getValidCountryCode().toLowerCase()):e=CCweb.util.hasFeature("ccm_bug_fix")?a.toLowerCase():"eu"===a.toLowerCase()?null:a.toLowerCase(),e&&CCweb.util.currencyMap[e]===s||(e=s)}return CCweb.util.isTeamPlanAvailable(e)&&CCweb.util.isTeamPlanAvailable(s)&&(t=!1),t},createCartModel:function(){for(var e,t,s=["offer","regular"],a=0;a<s.length;a++)if(e=CCweb.util.sessionStorageGet(CCweb.util.getTeamCartModelSessionStorageKey(s[a]))){t=s[a];break}var i,n=CCweb.models.currency.get("currency");if(CCweb.models.auth.isValid())i=CCweb.models.profile.get("countryCode");else{var o=CCweb.util.getParam("store_code");i=!o||CCweb.util.hasFeature("ccm_bug_fix")&&!CCweb.util.isValidCountry(o)?CCweb.models.ip_profile.getValidCountryCode():CCweb.util.hasFeature("ccm_bug_fix")?o:"eu"===o.toLowerCase()?null:o}i&&CCweb.util.currencyMap[i.toLowerCase()]!==n&&(i=null);var l=i?i:n;if(e){var r=JSON.parse(e);r.country=l.toUpperCase(),this.cartModel=new CCweb.model_cart_team(r,{parse:!0})}else this.cartModel=new CCweb.model_cart_team({country:l.toUpperCase(),serviceCommitment:"YEAR",market:"COM",type:"offer"})},createPlanMap:function(){this.planTitles={},this.planViews={};var e=this;_.each(this.modelPlans,function(t){if("single_app"!==t.get("planType")){var s=t.get("planId"),a={title:t.get("title"),subtitle:t.get("subtitle")};e.planTitles[s]=a;var i=e.createViewPlan(t);i&&(e.planViews[s]=i.render().$el)}})},createViewPlan:function(e){return CCweb.view_plan_factory.create(e,{stepModel:this.stepModel,cartModel:this.cartModel,singleAppModel:this.collectionPlans.getCorrespondingSingleAppOffer(e.get("templateType"))})},switchPlan:function(e){this.planViews[e].hasClass("active")||(_.each(this.planViews,function(e){e.removeClass("active")}),this.planViews[e].addClass("active")),this.$(".plan_option").removeClass("active"),this.$(".plan_option."+e).addClass("active"),this.$(".plan_option."+e+" input").prop("checked",!0),this.cartModel.switchCustomerType(e)},checkForUrlParams:function(){var e=CCweb.util.getParam("plan");if(e&&"team"===e){var t=CCweb.util.getParam("step");t&&"2"===t&&this.setStep(2)}},renderStepOneContent:function(){if(this.$(".step_one").append(this.stepOneSkeletonTemplate()),this.$(".step_one_content").append(this.stepOneContentTemplate()),this.addMaxTeamLicenses(),this.$(".step_one_sidebar").append(this.sidebarTemplate()),CCweb.util.hasFeature("temp_plans_purchase_orders")){var e=CCweb.models.currency.get("currency"),t=this.getEnterpriseConsultURL(e);t&&this.$("a.enterprise_consult").attr("href",t).attr("target","_blank")}else this.updateStepOneGoUrls();var s=this;this.planTitles.offer?(this.$(".plan_selector").append(this.optionsSelectorTemplate({title:this.planTitles.offer.title,subtitle:this.planTitles.offer.subtitle,value:"offer",className:"offer"})),_.each(this.planTitles,function(e,t){"offer"!==t&&s.$(".plan_selector").append(s.optionsSelectorTemplate({title:e.title,subtitle:e.subtitle,value:t,className:t}))})):_.each(this.planTitles,function(e,t){s.$(".plan_selector").append(s.optionsSelectorTemplate({title:e.title,subtitle:e.subtitle,value:t,className:t}))}),_.each(this.planViews,function(e){s.$(".plan_content").append(e)});var a=this.cartModel.get("type");_.contains(["regular","offer"],a)||(a="offer"),this.planViews[a].addClass("active"),this.$(".plan_option."+a).addClass("active"),this.$(".plan_option."+a+" input").prop("checked",!0)},renderStepTwoContent:function(){this.$(".step_two").append(this.stepTwoContentTemplate()),this.$(".cart_widget").append(this.cartWidgetView.$el),CCweb.util.hasFeature("temp_plans_purchase_orders")||this.updateStepTwoGoUrls(),this.$(".step_two_back").on("click",this.switchToPreviousStep)},renderProgressIndicatorBar:function(){this.progressIndicatorView&&this.progressIndicatorView.$el.detach(),this.progressIndicatorView.render();var e=this.stepModel.get("step");switch(e){case 1:this.$(".step_one .team_progress").append(this.progressIndicatorView.$el);break;case 2:this.$(".step_two .team_progress").append(this.progressIndicatorView.$el)}},renderUnsupportedRegionOverlay:function(){this.$(".step_one_plans").append(this.unsupportedRegionOverlayTemplate());var e=CCweb.models.currency.get("currency"),t="https://www.adobe.com/go/CCT_Partner_Finder",s="";s=_.contains(["sg","my","th","id","ph","in","hk","tw","kr"],e)?CCweb.util.goURL(t,null,e):CCweb.util.goURL(t),this.$(".unsupported_overlay_btn").attr("href",s)},addMaxTeamLicenses:function(){var e=CCweb.models.currency.get("currency"),t=CCweb.util.getMaxLicensesForTeam(e);t&&this.$(".team_max_licenses").html(t)},updateStepOneGoUrls:function(){var e=CCweb.models.currency.get("currency"),t=this.getBusinessConsultURL(e);t&&this.$("a.business_consult").attr("href",t).attr("target","_blank");var s=this.getEnterpriseConsultURL(e);s&&this.$("a.enterprise_consult").attr("href",s).attr("target","_blank")},updateStepTwoGoUrls:function(){var e=CCweb.models.currency.get("currency"),t=this.getBusinessConsultURL(e);t&&this.$("a.team_consult").attr("href",t).attr("target","_blank")},getBusinessConsultURL:function(e){var t,s="https://www.adobe.com/go/CCT_Consult";return t=_.contains(["au","sg","my","th","id","ph","in","hk","tw","kr","ch","dk","de","gb","no","se"],e)?CCweb.util.goURL(s,null,e):CCweb.util.goURL(s)},getEnterpriseConsultURL:function(e){var t,s="https://www.adobe.com/go/CCEntContact";return t=_.contains(["au","sg","my","th","id","ph","in","hk","tw","kr"],e)?CCweb.util.goURL(s,null,e):CCweb.util.goURL(s)},getTeamConsultNumber:function(e){var t=CCweb.util.teamSalesContactPhoneMap[e],s=t?t[CCweb.config.locale]||t.en:null;return s},renderTeamPhoneNumbers:function(){var e,t=CCweb.models.currency.get("currency"),s=this.getTeamConsultNumber(t);s&&"au"===t?e=CCweb.util.loc("{0}{1} Australia, {2} New Zealand{3}",'<span class="team_phone">','<div class="desktop">'+s[0]+'</div><a class="mobile" href="tel:'+s[0]+'">'+s[0]+"</a>",'<div class="desktop">'+s[1]+'</div><a class="mobile" href="tel:'+s[1]+'">'+s[1]+"</a>","</span>"):s?e=_.contains(["ch","dk","no","se"],t)?'<span class="team_phone"><div class="desktop">'+s+'</div><a class="mobile" href="tel:'+s+'">'+s+"</a></span>":CCweb.util.loc("{0} {1}(Now accepting POs){2}",'<span class="team_phone"><div class="desktop">'+s+'</div><a class="mobile" href="tel:'+s+'">'+s+"</a></span>",'<span class="team_phone_orders">',"</span>"):"de"===t&&(e=CCweb.util.loc("{0}Call your {1}regional number{2}.{3} {4}(Now accepting POs){5}",'<span class="team_phone">','<a href="'+CCweb.util.goURL("https://www.adobe.com/go/AdobeSalesEMEA")+'" target="_blank">',"</a>","</span>",'<span class="team_phone_orders">',"</span>")),e&&this.$(".phone_orders").html(e)},renderEntPhoneNumbersNew:function(){var e,t,s=this.getDefaultCountryCode();if(s)e=CCweb.util.enterpriseSalesContactPhoneMapNew[s],e&&(t='<span class="ent_phone"><div class="desktop">'+e+'</div><a class="mobile" href="tel:'+e+'">'+e+"</a></span>");else{var a=CCweb.models.currency.get("currency");if("de"===a)t='<span class="ent_phone">'+CCweb.util.loc("Call your {0}regional number{1}",'<a href="'+CCweb.util.goURL("https://www.adobe.com/go/AdobeSalesEMEA")+'" target="_blank">',"</a>")+"</span>";else if("au"===a){var i=CCweb.util.enterpriseSalesContactPhoneMapNew.au,n=CCweb.util.enterpriseSalesContactPhoneMapNew.nz;i&&n&&(t='<span class="ent_phone">'+CCweb.util.loc("{0} Australia, {1} New Zealand",'<div class="desktop">'+i+'</div><a class="mobile" href="tel:'+i+'">'+i+"</a>",'<div class="desktop">'+n+'</div><a class="mobile" href="tel:'+n+'">'+n+"</a>")+"</span>")}}t&&this.$(".ent_consult_phone").html(t)},renderEntPhoneNumbers:function(){var e,t=CCweb.models.currency.get("currency"),s=CCweb.util.getEntConsultNumber(t,"en");s?e='<span class="ent_phone"><div class="desktop">'+s+'</div><a class="mobile" href="tel:'+s+'">'+s+"</a></span>":_.contains(["de","ch","dk","no","se"],t)&&(e='<span class="ent_phone">'+CCweb.util.loc("Call your {0}regional number{1}",'<a href="'+CCweb.util.goURL("https://www.adobe.com/go/AdobeSalesEMEA")+'" target="_blank">',"</a>")+"</span>"),e&&this.$(".ent_consult_phone").html(e)},adjustBannerHeight:function(e,t){e=e?0>e?0:e:0;var s=this.planViews.offer;if(s){var a=s.children(".wrapping_banner").innerHeight(),i=parseInt(s.children(".wrapping_banner").css("top").replace(/\D/g,""),10);if(a>10&&a>i){s.children(".wrapping_banner").css("top","-"+a+"px");var n=s.children(".wrapping_banner").children(".banner_title").innerWidth(),o=s.children(".wrapping_banner").children(".banner_info").innerWidth(),l=n>o?n:o;l+=20,s.children(".wrapping_banner").innerWidth(l);var r=parseInt(this.$(".step_one_plans").css("padding-top").replace(/\D/g,""),10)+(a-i);this.$(".step_one_plans").css("padding-top",r+"px")}else if(e){var p=this;setTimeout(function(){p.adjustBannerHeight(e-1,t)},t?t:100)}}},onStepChange:function(){this.isUnsupportedRegion()||this.renderProgressIndicatorBar()},onPlanOptionClick:function(e){e&&e.currentTarget.className.indexOf("plan_option")>-1&&(this.$(e.currentTarget).addClass("hide_outline"),this.switchPlan(this.getOptionName(e.currentTarget.className)))},onPlanOptionKeyUp:function(e){e&&e.currentTarget.className.indexOf("plan_option")>-1&&((e.keyCode?9===e.keyCode:9===e.charCode)?this.$(e.currentTarget).removeClass("hide_outline"):(e.keyCode?13===e.keyCode:13===e.charCode)&&this.switchPlan(this.getOptionName(e.currentTarget.className)))},getOptionName:function(e){var t;return t=e.indexOf("offer")>-1?"offer":"regular"}}),CCweb.view_tab_panel_edu_inst=CCweb.view_tab_panel_two_step.extend({className:CCweb.view_tab_panel_two_step.prototype.className+" edu_inst_plans special_offer"+(CCweb.util.hasFeature("temp_device_single_app")?" new":""),initialize:function(e){this.showEduInst=!0,CCweb.view_tab_panel_two_step.prototype.initialize.call(this,e);var t="stage"===CCweb.config.ccm_env,s=t?"http://www.adobe.com/go/stage_learn_more_education":"http://www.adobe.com/go/prod_learn_more_education",a=CCweb.util.goURL("https://www.adobe.com/go/edu_consultation");this.stepOneSkeletonTemplate=_.template('<div class="step_one_content" /><div class="step_one_sidebar" />'),this.stepOneContentTemplate=_.template('<div class="step_one_header"><div class="edu_inst_intro_text"><p>'+(CCweb.util.hasFeature("temp_plans_purchase_orders")?CCweb.util.loc("{0}Creative Cloud for education{1} is an affordable licensing option available for small workgroups, departments, classrooms, and labs&mdash;or even entire institutions.",'<a href="'+s+'" target="_self">',"</a>"):CCweb.util.loc("Affordable licensing options are available for small workgroups, departments, classrooms, and labs&mdash;or even entire institutions."))+'</p></div></div><div class="step_one_plans" />'),this.stepTwoContentTemplate=_.template('<div class="step_two_content"><p><a class="step_two_back">'+CCweb.util.loc("&#x2039;&nbsp;Back")+'</a></p><div class="step_two_header"><div class="edu_inst_intro_text"><h1>'+CCweb.util.loc("Select the apps you want")+"</h1><p>"+CCweb.util.loc("You can always add more later")+'</p></div><div class="team_progress" /></div><div class="hrule" /><div class="cart_widget" />'+(CCweb.util.hasFeature("temp_plans_purchase_orders")?"":'<div class="edu_inst_questions"><h2>'+CCweb.util.loc("Have questions?")+'</h2><div class="phone_orders" /><p><a href="'+s+'" class="learn_more">'+CCweb.util.loc("Learn more about Creative Cloud for education&nbsp;&#x203A;")+'</a></p><p><a href="'+a+'" target="_blank" class="team_consult">'+CCweb.util.loc("Request a consultation&nbsp;&#x203A;")+"</a></p></div>")+"</div>"),this.sidebarTemplate=_.template(CCweb.util.hasFeature("temp_plans_purchase_orders")?'<div class="large_inst"><h1>'+CCweb.util.loc("Buying for an entire institution?")+"</h1><p>"+CCweb.util.loc("{0}Creative Cloud for enterprise{1} offers customized licensing for your entire institution. Get the latest creative desktop apps and services, collaboration, license management tools, and enterprise-level support.",'<a class="ent_learn_more" href="'+s+'">',"</a>")+'</p><p class="ent_consult_details"><span class="ent_consult_phone" /></p></div>':'<div class="large_inst"><h1>'+CCweb.util.loc("Buying for an entire institution?")+"</h1><p>"+CCweb.util.loc("{0}Creative Cloud for enterprise{1} offers customized licensing for your entire institution. Get the latest creative desktop apps and services, collaboration, license management tools, and enterprise-level support.",'<a class="ent_learn_more" href="'+s+'">',"</a>")+'</p><p class="ent_consult_details"><span class="ent_consult_phone" /><br /><a href="'+a+'" target="_blank" class="enterprise_consult">'+CCweb.util.loc("Request a consultation&nbsp;&#x203A;")+'</a></p></div><div class="hrule" /><div class="edu_inst_questions"><h2>'+CCweb.util.loc("Have questions?")+'</h2><p><a class="learn_more" href="'+s+'">'+CCweb.util.loc("Learn more about Creative Cloud for education.")+'</a></p><p class="edu_consult_details"><span class="phone_orders" /><br /><a href="'+a+'" target="_blank" class="edu_consult">'+CCweb.util.loc("Request a consultation&nbsp;&#x203A;")+"</a></p></div>"),this.unsupportedRegionOverlayTemplate=_.template('<div class="unsupported_overlay"><div class="unsupported_overlay_text"><p><%= CCweb.util.loc("Creative Cloud for teams is sold through authorized resellers in your region.") %></p></div><div class="unsupported_overlay_action"><a class="btn primary unsupported_overlay_btn"><%= CCweb.util.loc("Find a Reseller") %></a></div></div>'),this.progressIndicatorView=new CCweb.view_purchase_progress_indicator({model:this.stepModel}),this.createCartModel()},render:function(){if(CCweb.view_tab_panel_two_step.prototype.render.call(this),this.createPlanCards(),this.isUnsupportedRegion())this.renderStepOneContent(),this.renderUnsupportedRegionOverlay(),CCweb.util.hasFeature("temp_plans_purchase_orders")?this.renderEntPhoneNumbersNew():(this.renderEduPhoneNumbers(),this.renderEntPhoneNumbers()),this.stepModel.set("step",1);else if(this.cartWidgetView=this.cartWidgetView||new CCweb.view_cart_widget({cartModel:this.cartModel,stepModel:this.stepModel}),this.cartWidgetView.render(),this.renderStepOneContent(),this.renderStepTwoContent(),this.renderProgressIndicatorBar(),CCweb.util.hasFeature("temp_plans_purchase_orders")?this.renderEntPhoneNumbersNew():(this.renderEduPhoneNumbers(),this.renderEntPhoneNumbers()),this.checkForUrlParams(),this.$el.is(":visible")){var e=this;_.defer(function(){e.adjustHeights(20,100)})}return this},isUnsupportedRegion:function(){var e,t=!0,s=CCweb.models.currency.get("currency");if(CCweb.models.auth.isValid()&&CCweb.models.profile)e=CCweb.models.profile.get("countryCode").toLowerCase();else{var a=CCweb.util.getParam("store_code");!a||CCweb.util.hasFeature("ccm_bug_fix")&&!CCweb.util.isValidCountry(a)?CCweb.models.ip_profile.getValidCountryCode()&&(e=CCweb.models.ip_profile.getValidCountryCode().toLowerCase()):e=CCweb.util.hasFeature("ccm_bug_fix")?a.toLowerCase():"eu"===a.toLowerCase()?null:a.toLowerCase(),e&&CCweb.util.currencyMap[e]===s||(e=s)}return(CCweb.util.isTeamPlanAvailable(e)&&CCweb.util.isTeamPlanAvailable(s)&&CCweb.util.isEduPlanAvailable(e)&&CCweb.util.isEduPlanAvailable(s)||CCweb.util.isDeviceLicensingPurchasingCountry(e)&&CCweb.util.isDeviceLicensingPurchasingCountry(s))&&(t=!1),t},createCartModel:function(){var e,t="edu";e=CCweb.util.sessionStorageGet(CCweb.util.getTeamCartModelSessionStorageKey(t));var s,a=CCweb.models.currency.get("currency");if(CCweb.models.auth.isValid())s=CCweb.models.profile.get("countryCode");else{var i=CCweb.util.getParam("store_code");s=!i||CCweb.util.hasFeature("ccm_bug_fix")&&!CCweb.util.isValidCountry(i)?CCweb.models.ip_profile.getValidCountryCode():CCweb.util.hasFeature("ccm_bug_fix")?i:"eu"===i.toLowerCase()?null:i}s&&CCweb.util.currencyMap[s.toLowerCase()]!==a&&(s=null);var n=s?s:a;if(e){var o=JSON.parse(e);o.country=n.toUpperCase(),this.cartModel=new CCweb.model_cart_team(o,{parse:!0})}else this.cartModel=new CCweb.model_cart_team({country:n.toUpperCase(),serviceCommitment:"YEAR",market:"EDU",type:t})},createPlanCards:function(){this.planViews=[];var e=this;_.each(this.modelPlans,function(t){if("single_app"!==t.get("planType")){var s=e.createViewPlan(t);s&&e.planViews.push(s.render().$el)}})},createViewPlan:function(e){({tabModel:this.model});return CCweb.view_plan_factory.create(e,{tabModel:this.model,singleAppModel:this.collectionPlans.getCorrespondingSingleAppOffer(e.get("templateType")),stepModel:this.stepModel,cartModel:this.cartModel})},checkForUrlParams:function(){var e=CCweb.util.getParam("plan");if(e&&"edu_inst"===e){var t=CCweb.util.getParam("step");t&&this.setStep("2"===t&&this.isStepTwoAvailable()?2:1)}},renderUnsupportedRegionOverlay:function(){this.$(".step_one_plans").append(this.unsupportedRegionOverlayTemplate());var e,t=CCweb.models.currency.get("currency"),s="https://www.adobe.com/go/CCT_Partner_Finder";e=_.contains(["sg","my","th","id","ph","in","hk","tw","kr"],t)?CCweb.util.goURL(s,null,t):CCweb.util.goURL(s),this.$(".unsupported_overlay_btn").attr("href",e)},renderStepOneContent:function(){this.$(".step_one").append(this.stepOneSkeletonTemplate()),this.$(".step_one_content").append(this.stepOneContentTemplate()),this.$(".step_one_sidebar").append(this.sidebarTemplate());var e=this;_.each(this.planViews,function(t){e.$(".step_one_plans").append(t)})},renderStepTwoContent:function(){this.$(".step_two").append(this.stepTwoContentTemplate()),this.$(".cart_widget").append(this.cartWidgetView.$el),this.$(".step_two_back").on("click",this.switchToPreviousStep)},renderProgressIndicatorBar:function(){this.progressIndicatorView&&this.progressIndicatorView.$el.detach(),this.progressIndicatorView.render(),this.$(".step_two .team_progress").append(this.progressIndicatorView.$el)},renderEduPhoneNumbers:function(){var e,t=CCweb.models.currency.get("currency"),s=CCweb.util.eduSalesContactPhoneMap[t];s&&"au"===t?e=CCweb.util.loc("{0}{1} Australia, {2} New Zealand{3}",'<span class="edu_phone">','<div class="desktop">'+s[0]+'</div><a class="mobile" href="tel:'+s[0]+'">'+s[0]+"</a>",'<div class="desktop">'+s[1]+'</div><a class="mobile" href="tel:'+s[1]+'">'+s[1]+"</a>","</span>"):s?e=_.contains(["ch","dk","no","se"],t)?'<span class="edu_phone"><div class="desktop">'+s+'</div><a class="mobile" href="tel:'+s+'">'+s+"</a></span>":CCweb.util.loc("{0} {1}(Now accepting POs){2}",'<span class="edu_phone"><div class="desktop">'+s+'</div><a class="mobile" href="tel:'+s+'">'+s+"</a></span>",'<span class="edu_phone_orders">',"</span>"):"de"===t&&(e=CCweb.util.loc("{0}Call your {1}regional number{2}.{3} {4}(Now accepting POs){5}",'<span class="edu_phone">','<a href="'+CCweb.util.goURL("https://www.adobe.com/go/AdobeSalesEMEA")+'" target="_blank">',"</a>","</span>",'<span class="edu_phone_orders">',"</span>")),e&&this.$(".phone_orders").html(e)},renderEntPhoneNumbersNew:function(){var e,t,s=this.getDefaultCountryCode();if(s)e=CCweb.util.enterpriseSalesContactPhoneMapNew[s],e&&(t='<span class="ent_phone"><div class="desktop">'+e+'</div><a class="mobile" href="tel:'+e+'">'+e+"</a></span>");else{var a=CCweb.models.currency.get("currency");if("de"===a)t='<span class="ent_phone">'+CCweb.util.loc("Call your {0}regional number{1}",'<a href="'+CCweb.util.goURL("https://www.adobe.com/go/AdobeSalesEMEA")+'" target="_blank">',"</a>")+"</span>";else if("au"===a){var i=CCweb.util.enterpriseSalesContactPhoneMapNew.au,n=CCweb.util.enterpriseSalesContactPhoneMapNew.nz;i&&n&&(t='<span class="ent_phone">'+CCweb.util.loc("{0} Australia, {1} New Zealand",'<div class="desktop">'+i+'</div><a class="mobile" href="tel:'+i+'">'+i+"</a>",'<div class="desktop">'+n+'</div><a class="mobile" href="tel:'+n+'">'+n+"</a>")+"</span>")}}t&&this.$(".ent_consult_phone").html(t)},renderEntPhoneNumbers:function(){var e,t=CCweb.models.currency.get("currency"),s=CCweb.util.getEntConsultNumber(t,"en");s?e='<span class="ent_phone"><div class="desktop">'+s+'</div><a class="mobile" href="tel:'+s+'">'+s+"</a></span>":_.contains(["de","ch","dk","no","se"],t)&&(e='<span class="ent_phone">'+CCweb.util.loc("Call your {0}regional number{1}",'<a href="'+CCweb.util.goURL("https://www.adobe.com/go/AdobeSalesEMEA")+'" target="_blank">',"</a>")+"</span>"),e&&this.$(".ent_consult_phone").html(e)},adjustHeights:function(e,t){var s=0,a=!1;if(e=e?0>e?0:e:0,_.every(this.planViews,function(e){var t=e.height();return s=Math.max(s,t),!(a=0===t)}),a){if(e){var i=this;setTimeout(function(){i.adjustHeights(e-1,t)},t?t:100)}}else _.each(this.planViews,function(e){e.hasClass("free_plan")||e.height(s)})},isStepTwoAvailable:function(){var e=_.find(this.modelPlans,function(e){return"team_edu"===e.get("templateType")&&!e.get("planId")});return e?e.get("enabled"):!1}}),CCweb.view_tab_panel_edu=CCweb.view_tab_panel.extend({className:CCweb.view_tab_panel.prototype.className+" special_offer",learnMoreStudentsUrl:"stage"===CCweb.config.ccm_env?"http://www.adobe.com/go/stage_learn_more_students":"http://www.adobe.com/go/prod_learn_more_students",initialize:function(e){this.setupTemplate(),this.showEdu=!0,CCweb.view_tab_panel.prototype.initialize.call(this,e)},render:function(){return CCweb.util.hasFeature("temp_single_app_illustrator_edu_japan")&&this.setupTemplate(),this.viewFooter&&this.viewFooter.$el.detach(),this.$el.empty().append(this.template({eduPhone:CCweb.util.eduEnterpriseSalesContactPhoneMap[CCweb.models.currency.get("currency")],currency:CCweb.models.currency.get("currency")})),CCweb.view_tab_panel.prototype.render.call(this),this
},createViewPlan:function(e){var t={tabModel:this.model};return CCweb.view_plan_factory.create(e,t)},setupTemplate:function(){if(CCweb.util.hasFeature("temp_single_app_illustrator_edu_japan")){var e="edu_single_app",t=CCweb.util.planCanShow(e)?" education_offer_single_text":" with_photography_plan",s=CCweb.util.planCanShow(e)&&CCweb.util.planIsEnabled(e)?'<%= CCweb.util.loc("Students and teachers get the complete set of Creative Cloud apps and services at a special price. Or get started with the Photography or Illustrator plan, each featuring tight integration between your desktop and mobile devices so you can do your best work anywhere.") %>':'<%= CCweb.util.loc("Students and teachers get the complete set of Creative Cloud apps and services at a special price. Or get started with the Photography plan, which includes tight integration between your desktop and mobile devices so you can do your best work anywhere.") %>';this.template=_.template('<div class="edu_tab_content"><div class="educational_offer_text'+t+'"><p>'+s+"</p><%= CCweb.util.loc(\"{0}Learn more&nbsp;&#x203A;{1}\", \"<a class='learn_more' href='"+this.learnMoreStudentsUrl+"' target='_self'>\", \"</a>\") %></div></div>")}else this.template=_.template('<div class="edu_tab_content"><div class="educational_offer_text with_photography_plan"><p><%= CCweb.util.loc("Students and teachers get the complete set of Creative Cloud apps and services at a special price. Or get started with the Photography plan, which includes tight integration between your desktop and mobile devices so you can do your best work anywhere.") %></p><%= CCweb.util.loc("{0}Learn more&nbsp;&#x203A;{1}", "<a class=\'learn_more\' href=\''+this.learnMoreStudentsUrl+"' target='_self'>\", \"</a>\") %></div></div>")}});