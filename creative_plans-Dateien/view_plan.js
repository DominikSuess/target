CCweb.view_plan_factory={create:function(e,t){var i,l=e.get("templateType");switch(l){case"free":return new CCweb.view_plan_free({model:e});case"single":return new CCweb.view_plan_single({model:e});case"full":return new CCweb.view_plan_full({model:e});case"photography":return new CCweb.view_plan_photography({model:e});case"edu_photography":return new CCweb.view_plan_edu_photography({model:e,tabModel:t.tabModel});case"edu_single_app_illustrator":return this.createEduSingleAppView(e,t.tabModel);case"upgrade":if(CCweb.util.hasFeature("ccm_grand_gesture")){i=CCweb.models.currency.get("currency");var a=!CCweb.util.isDigitalRiverCustomer(i)&&"za"!==i;switch(e.get("id")){case"upgrade_grand_gesture":return a?new CCweb.view_plan_upgrade({model:e}):null;case"upgrade":return a?null:new CCweb.view_plan_upgrade({model:e})}return null}return new CCweb.view_plan_upgrade({model:e});case"team":return new CCweb.view_plan_team({model:e,singleAppModel:t.singleAppModel,stepModel:t.stepModel,cartModel:t.cartModel});case"team_upgrade":return new CCweb.view_plan_team_upgrade({model:e,singleAppModel:t.singleAppModel,stepModel:t.stepModel,cartModel:t.cartModel});case"edu":i=CCweb.models.currency.get("currency");var s=t.tabModel.get("eduServiceCommitment");s&&e.set("dropdown",s);var n="us"===i,o=CCweb.util.isEduPromoEnabled(i),r="YEAR_PREPAID"===s;switch(e.get("id")){case"edu_na":return!n||o||r?null:new CCweb.view_plan_edu({model:e,tabModel:t.tabModel});case"edu_na_promo":return n&&o&&!r?new CCweb.view_plan_edu({model:e,tabModel:t.tabModel}):null;case"edu_na_prepaid":return n&&!o&&r?new CCweb.view_plan_edu({model:e,tabModel:t.tabModel}):null;case"edu_na_prepaid_promo":return n&&o&&r?new CCweb.view_plan_edu({model:e,tabModel:t.tabModel}):null;case"edu_row":return n||o||r?null:new CCweb.view_plan_edu({model:e,tabModel:t.tabModel});case"edu_row_promo":return n||!o||r?null:new CCweb.view_plan_edu({model:e,tabModel:t.tabModel});case"edu_row_prepaid":return n||o||!r?null:new CCweb.view_plan_edu({model:e,tabModel:t.tabModel});case"edu_row_prepaid_promo":return!n&&o&&r?new CCweb.view_plan_edu({model:e,tabModel:t.tabModel}):null}return null;case"team_edu":return new CCweb.view_plan_team_edu({model:e,singleAppModel:t.singleAppModel,stepModel:t.stepModel,cartModel:t.cartModel});case"grand_gesture":return new CCweb.view_plan_grand_gesture({model:e});case"device_edu":return e.set("dropdown","YEAR_PREPAID"),CCweb.util.hasFeature("temp_device_single_app")?(t.singleAppModel.set("dropdown","YEAR_PREPAID"),new CCweb.view_plan_device_edu_new({model:e,singleAppModel:t.singleAppModel})):new CCweb.view_plan_device_edu({model:e})}},createEduSingleAppView:function(e,t){return CCweb.util.hasFeature("temp_single_app_illustrator_edu_japan")?new CCweb.view_plan_edu_single_app({model:e,tabModel:t}):null}},CCweb.view_plan=Backbone.View.extend({className:"plan with_photography_plan",events:{"click a.btn":"onButtonClick","keyup a.btn":"onButtonKeyUp"},initialize:function(){_.bindAll(this,"render","onButtonClick","showDisabled","showEnabled","onClose"),this.template=_.template('<div class="plan_title"><%= title %></div><div class="plan_cost" /><div class="plan_cost_info"><div class="vat_info" /></div><div class="plan_options" /><div class="plan_features_info" /><div class="plan_features"><ul /></div><div class="plan_sign_up"><a class="btn primary" tabIndex="0"><%= button.text %></a></div>'),this.featureTemplate=_.template("<li><%= feature %></li>"),this.viewPrice=new CCweb.view_price({model:this.model}).render(),this.model.on("change:enabled",this.render),this.model.on("change:showVAT",this.render),this.model.on("change:showTaxInfo",this.render)},_getStoreCodeValue:function(){var e=CCweb.models.currency.get("currency"),t=CCweb.util.getParam("store_code");if(t&&CCweb.util.isValidCountry(t))t=CCweb.util.currencyMap[t.toLowerCase()]===e?t:e;else{var i=CCweb.models.ip_profile.getValidCountryCode();t=!CCweb.models.auth.isValid()&&i?CCweb.util.currencyMap[i.toLowerCase()]!==e?e:"":e}return t},_specifyCurrency:function(e){if(e)if(e.indexOf("store_code=")>-1)e=e.replace(/store_code=\S\S/,"store_code="+this._getStoreCodeValue());else{var t=e.indexOf("?")>-1?"&":"?";e+=t+"store_code="+this._getStoreCodeValue()}return e},render:function(){if(this.viewPrice&&this.viewPrice.$el.detach(),this.$el.empty().append(this.template({title:this.model.get("device_edu"===this.model.get("templateType")?"priceTitle":"title"),button:this.model.get("button")})),this.$(".plan_cost").replaceWith(this.viewPrice.$el),this.model.get("enabled")?this.showEnabled():this.showDisabled(),this.model.get("showVAT"))if(this.model.get("vatIncluded")===!0){var e=CCweb.util.loc("inclusive of VAT");this.$(".vat_info").append(e)}else this.model.get("vatIncluded")===!1&&this.$(".vat_info").append(CCweb.util.loc("excluding VAT"));if(this.model.get("showTaxInfo")){var t=CCweb.models.currency.get("currency");"au"===t?this.$(".vat_info").append(CCweb.util.loc("No GST payable")):"jp"===t&&this.$(".vat_info").append(CCweb.util.loc("Not taxable"))}var i=this.model.get("featuresInfo");i&&this.$(".plan_features_info").append(i);var l=this;return _.each(this.model.get("features"),function(e){if(null!==e&&"object"==typeof e)if(e.currencies){var t=CCweb.models.currency.get("currency");e=_.indexOf(e.currencies,t)>=0?e.str:null}else e.paymentType&&(e=e.paymentType===l.model.get("dropdown")?e.str:null);null!==e&&l.$(".plan_features ul").append(l.featureTemplate({feature:e}))}),"team_upgrade"!==this.model.get("templateType")||this.model.get("enabled")||(this.$(".team_upgrade_terms_link").removeAttr("href"),this.$(".team_upgrade_terms_link").css("cursor","default")),this.priceStyle&&this.$(".plan_cost").addClass(this.priceStyle),"individual"===this.model.get("tabId")&&this.$(".plan_title").addClass("two_line"),this},showDisabled:function(){this.$el.css("opacity",.2),this.$(".btn").bind("click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),this.$(".btn").addClass("disabled")},showEnabled:function(){this.$el.css("opacity",1),this.$(".btn").unbind("click"),this.$(".btn").removeClass("disabled")},onButtonKeyUp:function(e){var t=e&&e.keyCode?e.keyCode:e.charCode;return 13===t&&this.onButtonClick(),!1},onButtonClick:function(){var e=this.model.getTrackingId();e&&CCweb.events.trigger(e);var t=this.model.getUrl();if(CCweb.models.auth.isValid())CCweb.models.auth.isEnterpriseUser(CCweb.models.profile.get("userId"))?CCweb.models.auth.blockEnterpriseUser():window.location=t;else{var i=this.model.getSCJoinStep1Event();i&&CCweb.events.trigger(i);var l=this.model.getSusiACValue();l&&(window.adobeid.api_parameters.authorize.state.ac=l);var a=this.model.getSusiContextId();a&&(window.adobeid.api_parameters.authorize.ctx_id=a),window.adobeid.api_parameters.authorize.force_marketing_permission=!1,window.adobeid.redirect_uri=window.location.protocol+"//"+window.location.host+t;var s=this.model.get("templateType");_.delay(function(){var e="sign_up";("upgrade"===s||"team_upgrade"===s)&&(e="sign_in"),CCweb.events.trigger(e,CCweb.config.IDP_CLIENT_ID_JOIN_WORKFLOW_SUSI)},200)}return!1},onClose:function(){this.viewPrice.close(),this.model.off("change:enabled",this.render),this.model.off("change:showVAT",this.render),this.model.off("change:showTaxInfo",this.render)}}),CCweb.view_plan_multiple_price=Backbone.View.extend({className:"plan",initialize:function(e){_.bindAll(this,"render","onButtonClick","showDisabled","showEnabled","onClose"),this.template=_.template('<div class="primary_price"><div class="plan_title"><%= completeTitle %></div><div class="plan_cost" /><div class="plan_cost_info"><div class="vat_info" /></div></div><div class="secondary_price"><div class="plan_title"><%= singleAppTitle %></div><div class="plan_cost" /><div class="plan_cost_info"><div class="vat_info" /></div></div><div class="plan_options" /><div class="plan_features_info" /><div class="plan_features"><ul /></div><div class="plan_select_apps"><a class="btn primary" tabIndex="0"><%= buttonText %></a></div>'),this.featureTemplate=_.template("<li><%= feature %></li>"),this.viewPrice=new CCweb.view_price({model:this.model}).render(),this.singleAppModel=e.singleAppModel,this.viewPriceSingleApp=new CCweb.view_price({model:this.singleAppModel}).render(),this.model.on("change:enabled",this.render,this),this.model.on("change:showVAT",this.render,this),this.model.on("change:showTaxInfo",this.render,this)},_specifyCurrency:function(e){if(e){var t=CCweb.models.currency.get("currency");if(e.indexOf("store_code=")>-1)e=e.replace(/store_code=\S\S/,"store_code="+t);else{var i=e.indexOf("?")>-1?"&":"?";e+=i+"store_code="+t}}return e},render:function(){if(this.viewPrice&&this.viewPrice.$el.detach(),this.viewPriceSingleApp&&this.viewPriceSingleApp.$el.detach(),this.$el.empty().append(this.template({completeTitle:this.model.get("priceTitles").complete,singleAppTitle:this.model.get("priceTitles").singleApp,buttonText:this.model.get("buttons").stepOne.text})),CCweb.util.hasFeature("temp_device_single_app")){var e=this.model.get("buttons").stepOne.link;e&&this.$(".plan_select_apps .btn").attr("href",e)}if(this.$(".primary_price .plan_cost").replaceWith(this.viewPrice.$el),this.$(".secondary_price .plan_cost").replaceWith(this.viewPriceSingleApp.$el),this.model.get("enabled")?this.showEnabled():this.showDisabled(),this.model.get("showVAT"))if(this.model.get("vatIncluded")===!0){var t=CCweb.util.loc("inclusive of VAT");this.$(".vat_info").append(t)}else this.model.get("vatIncluded")===!1&&this.$(".vat_info").append(CCweb.util.loc("excluding VAT"));if(this.model.get("showTaxInfo")){var i=CCweb.models.currency.get("currency");"au"===i?this.$(".vat_info").append(CCweb.util.loc("No GST payable")):"jp"===i&&this.$(".vat_info").append(CCweb.util.loc("Not taxable"))}var l=this.model.get("featuresInfo");l&&this.$(".plan_features_info").append(l);var a=this;return _.each(this.model.get("features"),function(e){if(null!==e&&"object"==typeof e)if(e.currencies){var t=CCweb.models.currency.get("currency");e=_.indexOf(e.currencies,t)>=0?e.str:null}else e.paymentType&&(e=e.paymentType===a.model.get("dropdown")?e.str:null);null!==e&&a.$(".plan_features ul").append(a.featureTemplate({feature:e}))}),"team_upgrade"!==this.model.get("templateType")||this.model.get("enabled")||(this.$(".banner_terms").removeAttr("href"),this.$(".banner_terms").css("cursor","default")),this.priceStyle&&this.$(".complete .plan_cost").addClass(this.priceStyle),this},showDisabled:function(){this.$el.css("opacity",.2),this.$(".btn").bind("click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),this.$(".btn").addClass("disabled")},showEnabled:function(){this.$el.css("opacity",1),this.$(".btn").unbind("click"),this.$(".btn").removeClass("disabled")},onClose:function(){this.viewPrice.close(),this.viewPriceSingleApp.close(),this.model.off("change:enabled",this.render),this.model.off("change:showVAT",this.render),this.model.off("change:showTaxInfo",this.render)}}),CCweb.view_plan_free=CCweb.view_plan.extend({className:CCweb.view_plan.prototype.className+" free_one_line_display free_plan",initialize:function(e){CCweb.view_plan.prototype.initialize.call(this,e),this.template=_.template('<div class="plan_description_text"><div class="plan_title"><%= title %></div><div class="plan_features_info" /><div class="plan_features"><ul /></div></div></div><div class="plan_sign_up"><a class="btn primary" tabIndex="0"><%= button.text %></a></div><div class="push_bottom"></div>')},render:function(){return CCweb.view_plan.prototype.render.call(this),CCweb.models.auth.isValid()&&CCweb.models.profile&&CCweb.util.isPaid()&&(this.$(".btn").bind("click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),this.$(".btn").addClass("disabled")),this},onButtonClick:function(){var e=this.model.getTrackingId();e&&CCweb.events.trigger(e);var t=this.model.getUrl();return window.location=t,!1}}),CCweb.view_plan_select=CCweb.view_plan.extend({events:_.extend(CCweb.view_plan.prototype.events,{"change select.commitment_length":"switchCommitmentLength"}),initialize:function(e){_.bindAll(this,"switchCommitmentLength"),this.selectTemplate=_.template('<select class="commitment_length" />'),this.optionTemplate=_.template('<option value="<%= value %>" <%= (selected? "selected": "") %>><%= text %></option>'),CCweb.view_plan.prototype.initialize.call(this,e)},render:function(){CCweb.view_plan.prototype.render.call(this),this.$(".plan_options").empty().append(this.selectTemplate());var e=this;return _.each(e.model.get("options"),function(t){null!==t&&e.$(".plan_options select").append(e.optionTemplate({value:t.value,text:t.text,selected:e.model.get("dropdown")===t.value}))}),this.model.get("enabled")?this.$(".commitment_length").prop("disabled",!1):this.$(".commitment_length").prop("disabled",!0),this},switchCommitmentLength:function(){var e=this.$(".commitment_length").val();this.model.set("dropdown",e)},enableLinks:function(){},disableLinks:function(){},updateGoUrls:function(){}}),CCweb.view_plan_existing_customer=CCweb.view_plan.extend({className:CCweb.view_plan.prototype.className+" bordered_plan",initialize:function(e){this.existingCustomerTemplate=_.template('<div class="wrapping_header"><%= CCweb.util.loc("Special for CS customers") %><span class="arrow" /></div>'),CCweb.view_plan.prototype.initialize.call(this,e)},render:function(){return CCweb.view_plan.prototype.render.call(this),this.$el.prepend(this.existingCustomerTemplate()),this}}),CCweb.view_plan_per_user=CCweb.view_plan_select.extend({initialize:function(e){this.perUserTemplate=_.template('<div class="per_user"><%= CCweb.util.loc("per user") %></div>'),CCweb.view_plan_select.prototype.initialize.call(this,e)},render:function(){return CCweb.view_plan_select.prototype.render.call(this),this.$(".plan_cost_info").prepend(this.perUserTemplate()),this}}),CCweb.view_plan_per_user_existing_customer=CCweb.view_plan_select.extend({className:CCweb.view_plan_select.prototype.className+" bordered_plan",initialize:function(e){this.existingCustomerTemplate=_.template('<div class="wrapping_header"><%= CCweb.util.loc("Special for CS customers") %><span class="arrow" /></div>'),this.perUserTemplate=_.template('<div class="per_user"><%= CCweb.util.loc("per user") %></div>'),CCweb.view_plan_select.prototype.initialize.call(this,e)},render:function(){return CCweb.view_plan_select.prototype.render.call(this),this.$el.prepend(this.existingCustomerTemplate()),this.$(".plan_cost_info").prepend(this.perUserTemplate()),this}}),CCweb.view_plan_single=CCweb.view_plan.extend({className:CCweb.view_plan.prototype.className+" plan_single",events:_.extend(CCweb.view_plan.prototype.events,{"change select.single_app":"switchSelectedApp","change select.commitment_length":"switchCommitmentLength"}),initialize:function(e){this.model.get("collectionSingleApps")||this.model.set("collectionSingleApps",new CCweb.collection_single_apps),_.bindAll(this,"switchSelectedApp","switchCommitmentLength"),this.appsSelectTemplate=_.template('<select class="single_app"><option value disabled="disabled" selected="true"><%= CCweb.util.loc("Choose an app") %></option></select>'),this.commitmentLengthSelectTemplate=_.template('<select class="commitment_length" />'),this.optionTemplate=_.template('<option value="<%= value %>" <%= (selected ? "selected" : "") %>><%= text %></option>'),this.pickAnAppTemplate=_.template('<div class="error"><%= CCweb.util.loc("Please choose an app") %></div>'),this.offerTemplate=_.template('<div class="wrapping_header"><%= CCweb.util.loc("Limited-time Offer") %><span class="arrow" /></div>'),this.model.get("lastUserSelectedServiceCommitment")||this.model.set("lastUserSelectedServiceCommitment","YEAR"),CCweb.view_plan.prototype.initialize.call(this,e)},render:function(){CCweb.view_plan.prototype.render.call(this);var e=this;this.$(".plan_options").empty().append(this.appsSelectTemplate());var t=this.model.get("selectedApp");if(!t){var i=CCweb.util.getParam("single_app"),l=this.model.get("collectionSingleApps").getAppById(i);l&&l.length>0&&(t=l[0])}return _.each(this.model.get("collectionSingleApps").models,function(i){null!==i&&e.$(".plan_options select.single_app").append(e.optionTemplate({value:i.get("id"),text:i.get("displayName"),selected:t?t.get("id")===i.get("id"):!1}))}),this.$(".plan_options").append(this.pickAnAppTemplate()),this.$(".plan_options .error").hide(),this.$(".plan_options").append(this.commitmentLengthSelectTemplate()),this.$(".commitment_length").hide(),this.switchSelectedApp(null),this.model.get("enabled")?(this.$(".single_app").prop("disabled",!1),this.$(".commitment_length").prop("disabled",!1)):(this.$(".single_app").prop("disabled",!0),this.$(".commitment_length").prop("disabled",!0)),this},updateFeatures:function(e){this.$(".plan_features ul").empty();var t,i,l=this;t=CCweb.models.currency.get("currency"),i=l.model.get("dropdown"),_.each(e,function(e){if(null!==e&&"object"==typeof e){var a=e.paymentType&&i?_.contains(e.paymentType,i):!1,s=e.currencies&&t?_.contains(e.currencies,t):!1;e.currencies&&e.paymentType?e=s&&a?e.str:null:e.currencies?e=s?e.str:null:e.paymentType&&(e=a?e.str:null)}null!==e&&l.$(".plan_features ul").append(l.featureTemplate({feature:e}))})},updatePlanOptions:function(e,t){var i=this,l=!1;return this.$(".plan_options select.commitment_length").empty(),_.each(e,function(e){if(e){var a=t===e.value;l=l||a,i.$(".plan_options select.commitment_length").append(i.optionTemplate({value:e.value,text:e.text,selected:a}))}}),l},getSelectedAppFromDropdown:function(){var e=null,t=this.$(".single_app").val(),i=this.model.get("collectionSingleApps").getAppById(t);return i&&i.length>0&&(e=i[0]),e},proxyPriceData:function(){var e=this.model.get("selectedApp");e&&(this.model.resetPrice(),this.model.set("annualPrice",e.get("annualPrice")),this.model.set("annualPrepaidPrice",e.get("annualPrepaidPrice")),this.model.set("monthlyPrice",e.get("monthlyPrice")),this.model.updatePriceDisplay())},switchSelectedApp:function(){var e=this.model.get("selectedApp");if(e&&e.off("change:price",this.proxyPriceData,this),e=this.getSelectedAppFromDropdown(),this.model.set("selectedApp",e),e){this.$(".plan_options .error").hide();var t=e.get("options");this.updatePlanOptions(t,this.model.get("lastUserSelectedServiceCommitment")),this.model.set("productMap",e.get("productMap")),this.switchCommitmentLength(null),this.$(".commitment_length").show(),this.proxyPriceData(),e.on("change:price",this.proxyPriceData,this),this.$el.height("auto");var i=e.get("features");this.updateFeatures(i),this.trigger("sizeChanged")}},switchCommitmentLength:function(e){var t=this.model.get("selectedApp");if(t){var i=e?!0:!1,l=this.$(".commitment_length").val();i&&this.model.set("lastUserSelectedServiceCommitment",l),this.model.set("dropdown",l),t.set("dropdown",l)}},onButtonClick:function(){var e=this.model.get("selectedApp");if(e){var t=this.model.getTrackingId();t&&CCweb.events.trigger(t);var i=e.getUrl();if(CCweb.models.auth.isValid())CCweb.models.auth.isEnterpriseUser(CCweb.models.profile.get("userId"))?CCweb.models.auth.blockEnterpriseUser():window.location=i;else{var l=e.getSCJoinStep1Event();l&&CCweb.events.trigger(l);var a=e.getSusiACValue();a&&(window.adobeid.api_parameters.authorize.state.ac=a);var s=e.getSusiContextId();s&&(window.adobeid.api_parameters.authorize.ctx_id=s),window.adobeid.api_parameters.authorize.force_marketing_permission=!1,window.adobeid.redirect_uri=window.location.protocol+"//"+window.location.host+i,_.delay(function(){CCweb.events.trigger("sign_up",CCweb.config.IDP_CLIENT_ID_JOIN_WORKFLOW_SUSI)},200)}return!1}this.$el.height("auto"),this.$(".plan_options .error").show(),this.trigger("sizeChanged")},enableLinks:function(){this.$(".single_app").prop("disabled",!1),this.$(".commitment_length").prop("disabled",!1)},disableLinks:function(){this.$(".single_app").prop("disabled",!0),this.$(".commitment_length").prop("disabled",!0)}}),CCweb.view_plan_photography=CCweb.view_plan_select.extend({className:CCweb.view_plan_select.prototype.className+" plan_photography",initialize:function(e){CCweb.view_plan_select.prototype.initialize.call(this,e)},render:function(){switch(this.model.get("dropdown")){case"YEAR":this.priceStyle="pro";break;case"YEAR_PREPAID":this.priceStyle="annual_pmt";break;case"MONTH":this.priceStyle="individual"}if(CCweb.view_plan_select.prototype.render.call(this),CCweb.util.hasFeature("temp_plans_url_functions")){var e,t;CCweb.util.hasFeature("ccm_bug_fix")?(e=new CCweb.url(CCweb.util.getLocalizedPath("/plans/photography"),{ignoreRoot:!0}),t=this._getStoreCodeValue(),t&&e.addParam("store_code",t),this.$(".photography_learn_more_link").attr("href",e.toString()).css("cursor","hand")):(e=new CCweb.url(CCweb.util.getLocalizedPath("/plans/photography"),{ignoreRoot:!0}).addParam("store_code",this._getStoreCodeValue()).toString(),this.$(".photography_learn_more_link").attr("href",e).css("cursor","hand"))}else this.$(".photography_learn_more_link").attr("href",this._specifyCurrency(CCweb.util.appendStoreCodeUrlIfPresent(CCweb.util.getLocalizedPath("/plans/photography")))).css("cursor","hand");return this},updateGoUrls:function(){var e=CCweb.models.currency.get("currency"),t=CCweb.util.goURL("https://www.adobe.com/go/ccpp_emea_terms",null,e);this.$(".emea_promo_individual").attr("href",t)}}),CCweb.view_plan_full=CCweb.view_plan_select.extend({className:CCweb.view_plan_select.prototype.className+" plan_full",initialize:function(e){CCweb.view_plan_select.prototype.initialize.call(this,e)},render:function(){switch(this.model.get("dropdown")){case"YEAR":this.priceStyle="pro";break;case"YEAR_PREPAID":this.priceStyle="annual_pmt";break;case"MONTH":this.priceStyle="individual"}return CCweb.view_plan_select.prototype.render.call(this),this}}),CCweb.view_plan_upgrade=CCweb.view_plan_select.extend({className:CCweb.view_plan_select.prototype.className+" plan_upgrade bordered_plan",initialize:function(e){this.priceStyle="offers",this.existingCustomerTemplate=_.template('<div class="wrapping_header"><%= CCweb.util.loc("Special for CS customers") %><span class="arrow" /></div>'),CCweb.view_plan_select.prototype.initialize.call(this,e),CCweb.util.hasFeature("ccm_grand_gesture")&&(this.model.on("change:price",this.render,this),this.cs6Model=CCweb.collections.plans.findWhere({id:"grand_gesture_cs6"}),this.cs6Model.on("change:price",this.render,this))},render:function(){if(CCweb.view_plan_select.prototype.render.call(this),this.$el.prepend(this.existingCustomerTemplate()),CCweb.util.hasFeature("ccm_grand_gesture")){var e=this.model.get("price"),t=CCweb.util.removeDollarQualifier(e);this.$(".offer_complete_bullet").html(t),e=this.cs6Model.get("price"),t=CCweb.util.removeDollarQualifier(e),this.$(".offer_cs6_complete_bullet").html(t)}return this},onButtonClick:function(){if(CCweb.util.hasFeature("ccm_grand_gesture")){var e=this.model.getTrackingId();e&&CCweb.events.trigger(e);var t=this.model.getUrl();return CCweb.app.navigate(t,!0),!1}CCweb.view_plan_select.prototype.onButtonClick.call(this)},onClose:function(){CCweb.util.hasFeature("ccm_grand_gesture")&&(this.model.off("change:price",this.render,this),this.cs6Model.off("change:price",this.render,this)),CCweb.view_plan_select.prototype.onClose.call(this)}}),CCweb.view_plan_team_with_cart=CCweb.view_plan_multiple_price.extend({className:CCweb.view_plan_multiple_price.prototype.className,events:{"click a.btn":"onButtonClick","keyup a.btn":"onButtonKeyUp"},initialize:function(e){this.stepModel=e.stepModel,this.cartModel=e.cartModel,CCweb.view_plan_multiple_price.prototype.initialize.call(this,e)},render:function(){return CCweb.view_plan_multiple_price.prototype.render.call(this),this},onButtonKeyUp:function(e){var t=e&&e.keyCode?e.keyCode:e.charCode;return 13===t&&this.onButtonClick(),!1},onButtonClick:function(){this.stepModel.set("step",2),this.cartModel.set("market",this.model.get("marketSegment")),this.cartModel.set("buttonText",this.model.get("buttons").stepTwo.text),this.cartModel.set("susiContextId",this.model.get("buttons").stepTwo.susiContextId),this.cartModel.set("trackingIds",this.model.get("buttons").stepTwo.trackingIds),this.cartModel.set("scJoinStep1Id",this.model.get("buttons").stepTwo.scJoinStep1Id),this.cartModel.set("susiACValues",this.model.get("buttons").stepTwo.susiACValues)}}),CCweb.view_plan_team=CCweb.view_plan_team_with_cart.extend({className:CCweb.view_plan_team_with_cart.prototype.className+" plan_team",initialize:function(e){this.priceStyle="team",this.perLicenseTemplate=_.template('<div class="per_license"><%= CCweb.util.loc("(per license)") %></div>'),CCweb.view_plan_team_with_cart.prototype.initialize.call(this,e)},render:function(){return CCweb.view_plan_team_with_cart.prototype.render.call(this),this.$(".plan_cost_info").prepend(this.perLicenseTemplate()),this}}),CCweb.view_plan_team_upgrade=CCweb.view_plan_team_with_cart.extend({className:CCweb.view_plan_team_with_cart.prototype.className+" plan_team_upgrade",initialize:function(e){this.priceStyle="team_upgrade",this.perLicenseTemplate=_.template('<div class="per_license"><%= CCweb.util.loc("(per license)") %></div>'),this.bannerTemplate=_.template('<div class="wrapping_banner"><div class="banner_title"><%= bannerInfo.title %></div><div class="banner_info"><span class="banner_subtitle"><%= bannerInfo.subtitle %></span><span><a class="banner_terms"><%= bannerInfo.termsInfo %></a></span></div><div class="reverse_arrow" /></div>'),CCweb.view_plan_team_with_cart.prototype.initialize.call(this,e)},render:function(){CCweb.view_plan_team_with_cart.prototype.render.call(this);var e=this.model.get("bannerInfo");e&&this.$el.prepend(this.bannerTemplate({bannerInfo:e}));var t=CCweb.util.goURL(CCweb.util.teamUpgradeTermsCurrencyUrlMap[CCweb.models.currency.get("currency")]);return this.$(".banner_terms").attr("href",t).attr("target","_blank"),this.$(".plan_cost_info").prepend(this.perLicenseTemplate()),this}}),CCweb.view_plan_edu=CCweb.view_plan_select.extend({className:CCweb.view_plan_select.prototype.className+" plan_edu bordered_plan",initialize:function(e){CCweb.view_plan_select.prototype.initialize.call(this),this.tabModel=e.tabModel,this.priceStyle="edu",this.bannerTemplate=_.template('<div class="wrapping_header"><%= CCweb.util.loc("Special for Students and Teachers") %><span class="arrow" /></div>'),this.learnMoreTemplate=_.template(CCweb.util.loc("{0}Learn more&nbsp;&#x203A;{1}",'<a class="promo_learn_more" href="<%= learnMoreStudentsUrl %>" target="_self">',"</a>")),_.bindAll(this,"switchCommitmentLength")},render:function(){CCweb.view_plan_select.prototype.render.call(this),this.$el.prepend(this.bannerTemplate());var e=this.model.get("id");return"edu_na_promo"!==e&&"edu_na"!==e||!CCweb.util.hasFeature("temp_prepaid_discount")?"edu_na_prepaid_promo"!==e&&"edu_na_prepaid"!==e||!CCweb.util.hasFeature("temp_prepaid_discount")||this.$(".plan_features ul li").eq(0).addClass("offer_ending_item"):this.$(".plan_features ul li").last().addClass("offer_ending_item"),this.model.get("enabled")?this.enableLinks():this.disableLinks(),this},getEduOfferTermsLocale:function(){var e={at:{defaultLocale:"at"},be:{defaultLocale:"be_en",en:"be_en",fr:"be_fr",nl:"be_nl"},cz:{defaultLocale:"cz"},de:{defaultLocale:"de"},es:{defaultLocale:"es"},fi:{defaultLocale:"fi"},fr:{defaultLocale:"fr"},ie:{defaultLocale:"ie"},it:{defaultLocale:"it"},lu:{defaultLocale:"lu_en",en:"lu_en",fr:"lu_fr",de:"lu_de"},nl:{defaultLocale:"nl"},pl:{defaultLocale:"pl"},pt:{defaultLocale:"pt"}};return function(t,i){var l=null,a=e[t];if(a){var s=a[i];l=s||a.defaultLocale}return l}}(),getEduOfferTermsLink:function(){var e=CCweb.models.currency.get("currency");switch(e){case"gb":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoGBP");case"au":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoAUD");case"de":var t,i=CCweb.util.goURL("http://www.adobe.com/go/EdPromoEUR");if(t=CCweb.models.auth.isValid()?CCweb.models.profile.get("countryCode"):CCweb.models.ip_profile.getValidCountryCode(),t&&CCweb.util.currencyMap[t.toLowerCase()]===e&&(t=t.toLowerCase(),CCweb.util.isEduPlanAvailable(t))){var l=this.getEduOfferTermsLocale(t,CCweb.config.locale);l&&(i="http://www.adobe.com/"+l+"/offer-terms/edu_puf_promo.html")}return i;case"dk":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoDKK");case"no":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoNOK");case"se":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoSEK");case"ch":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoCHF");case"jp":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoYEN");case"ar":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoARS");case"br":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoBRL");case"cl":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoCLP");case"co":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoCOP");case"hk":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoHKD");case"id":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoIDR");case"in":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoINR");case"kr":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoKRW");case"my":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoMYR");case"pe":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoPEN");case"ph":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoPHP");case"ru":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoRUB");case"sg":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoSGD");case"th":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoTHB");case"tr":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoTRY");case"tw":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoTWD");case"lb":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoLBP");case"bh":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoBHD");case"eg":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoEGP");case"jo":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoJOD");case"sa":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoSAR");case"kw":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoKWD");case"om":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoOMR");case"qa":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoQAR");case"ae":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoAED");case"il":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoILS");case"cr":case"ec":case"gt":case"ve":case"dz":case"ma":case"tn":case"lb":case"ye":case"ua":case"by":case"kz":case"tj":case"kg":case"uz":case"az":case"md":case"am":case"tm":case"ge":return CCweb.util.goURL("http://www.adobe.com/go/EdPromoUSD_"+e.toUpperCase());default:return CCweb.util.goURL("http://www.adobe.com/go/EdPromoUSD")}},switchCommitmentLength:function(){var e=this.$(".commitment_length").val();this.model.set("dropdown",e),this.tabModel.set("eduServiceCommitment",e)},enableLinks:function(){var e=this.model.get("id");("edu_na_promo"===e||"edu_na_prepaid_promo"===e||"edu_row_promo"===e||"edu_row_prepaid_promo"===e)&&(CCweb.util.hasFeature("temp_promo_terms_popup")?this.$(".plan_features ul li a.terms_link").css("cursor","hand").click(function(){CCweb.events.trigger("activate_modal_dialog",{type:"terms",args:{contentView:new CCweb.view_terms_content_STE}})}):this.$(".plan_features ul li a.terms_link").attr("href",this.getEduOfferTermsLink()).css("cursor","hand")),this.$(".plan_features ul li a.institutional_affiliation_link").attr("href",CCweb.util.goURL("http://www.adobe.com/go/ccm_edu_eligibility")).css("cursor","hand")},disableLinks:function(){var e=this.model.get("id");("edu_na_promo"===e||"edu_na_prepaid_promo"===e||"edu_row_promo"===e||"edu_row_prepaid_promo"===e)&&this.$(".plan_features ul li a.terms_link").removeAttr("href").css("cursor","default"),this.$(".plan_features ul li a.institutional_affiliation_link").removeAttr("href").css("cursor","default")}}),CCweb.view_plan_team_edu=CCweb.view_plan_team_with_cart.extend({className:CCweb.view_plan_team_with_cart.prototype.className+" plan_team_edu",initialize:function(e){this.priceStyle="team_edu",this.headerTemplate=_.template('<div class="plan_option"><div class="plan_title"><%= title %></div><div class="plan_subtitle"><%= subtitle %></div></div><div class="hrule">'),this.perUserTemplate=_.template('<div class="per_user"><%= CCweb.util.loc("(per user)") %></div>'),CCweb.view_plan_team_with_cart.prototype.initialize.call(this,e)
},render:function(){return CCweb.view_plan_team_with_cart.prototype.render.call(this),this.$el.prepend(this.headerTemplate({title:this.model.get("title"),subtitle:this.model.get("subtitle")})),this.$(".plan_cost_info").prepend(this.perUserTemplate()),this}}),CCweb.view_plan_edu_photography=CCweb.view_plan_select.extend({className:CCweb.view_plan_select.prototype.className+" plan_edu_photography",initialize:function(e){this.priceStyle="edu_photography",CCweb.view_plan_select.prototype.initialize.call(this,e)},render:function(){return CCweb.view_plan_select.prototype.render.call(this),this.model.get("enabled")?this.enableLinks():this.disableLinks(),this},enableLinks:function(){if(this.$(".plan_features ul li a.institutional_affiliation_link").attr("href",CCweb.util.goURL("http://www.adobe.com/go/ccm_edu_eligibility")).css("cursor","hand"),CCweb.util.hasFeature("temp_plans_url_functions")){var e=new CCweb.url(CCweb.util.getLocalizedPath("/plans/photography/edu"),{ignoreRoot:!0});if(CCweb.util.hasFeature("ccm_bug_fix")){var t=this._getStoreCodeValue();t&&e.addParam("store_code",t)}else e.addParam("store_code",this._getStoreCodeValue());this.$(".photography_edu_learn_more_link").attr("href",e.toString()).css("cursor","hand")}else this.$(".photography_edu_learn_more_link").attr("href",this._specifyCurrency(CCweb.util.appendStoreCodeUrlIfPresent(CCweb.util.getLocalizedPath("/plans/photography/edu")))).css("cursor","hand")},disableLinks:function(){this.$(".plan_features ul li a.institutional_affiliation_link").removeAttr("href").css("cursor","default"),this.$(".photography_edu_learn_more_link").removeAttr("href").css("cursor","hand")}}),CCweb.view_plan_edu_single_app=CCweb.view_plan_select.extend({className:CCweb.view_plan_select.prototype.className+" plan_edu_single_app",initialize:function(e){this.priceStyle="edu_single_app",CCweb.view_plan_select.prototype.initialize.call(this,e)},render:function(){return CCweb.view_plan_select.prototype.render.call(this),this.model.get("enabled")?this.enableLinks():this.disableLinks(),this.UpdateVisibility(),this},enableLinks:function(){this.$(".plan_features ul li a.institutional_affiliation_link").attr("href",CCweb.util.goURL("http://www.adobe.com/go/ccm_edu_eligibility")).css("cursor","hand")},disableLinks:function(){this.$(".plan_features ul li a.institutional_affiliation_link").removeAttr("href").css("cursor","default")},UpdateVisibility:function(){CCweb.util.planCanShow("edu_single_app")?(CCweb.util.planIsEnabled("edu_single_app")?(this.showEnabled(),this.$(".plan_options .commitment_length").prop("disabled",!1),this.enableLinks()):(this.showDisabled(),this.$(".plan_options .commitment_length").prop("disabled",!0),this.disableLinks()),this.$el.removeAttr("display")):this.$el.hide()}}),CCweb.view_plan_grand_gesture=CCweb.view_plan.extend({className:CCweb.view_plan.prototype.className+" plan_grand_gesture",initialize:function(e){this.priceStyle="offers",CCweb.view_plan.prototype.initialize.call(this,e)}}),CCweb.view_plan_device_edu=CCweb.util.hasFeature("temp_device_single_app")?void 0:CCweb.view_plan.extend({className:CCweb.view_plan.prototype.className+" plan_device_edu",initialize:function(e){this.headerTemplate=_.template('<div class="plan_option"><div class="plan_title"><%= title %></div><div class="plan_subtitle"><%= subtitle %></div></div><div class="hrule">'),this.perDeviceTemplate=_.template('<div class="per_device"><%= CCweb.util.loc("(per device)") %></div>'),CCweb.view_plan.prototype.initialize.call(this,e)},render:function(){return CCweb.view_plan.prototype.render.call(this),this.$el.prepend(this.headerTemplate({title:this.model.get("title"),subtitle:this.model.get("subtitle")})),this.model.get("showVAT")&&this.$(".vat_info").append("&nbsp;"),this.$(".plan_cost_info").prepend(this.perDeviceTemplate()),this.addPhoneNumbers(),this},addPhoneNumbers:function(){var e=CCweb.models.currency.get("currency"),t=CCweb.util.eduSalesContactPhoneMap[e];t&&"au"===e?(this.$(".device_edu_au_phone").html('<div class="desktop">'+t[0]+'</div><a class="mobile" href="tel:'+t[0]+'">'+t[0]+"</a>"),this.$(".device_edu_nz_phone").html('<div class="desktop">'+t[1]+'</div><a class="mobile" href="tel:'+t[1]+'">'+t[1]+"</a>")):t&&this.$(".device_edu_phone").html('<div class="desktop">'+t+'</div><a class="mobile" href="tel:'+t+'">'+t+"</a>")},onButtonClick:function(){var e=this.model.getTrackingId();return e&&CCweb.events.trigger(e),window.location=this.model.getUrl(),!1}}),CCweb.view_plan_device_edu_new=CCweb.util.hasFeature("temp_device_single_app")?CCweb.view_plan_multiple_price.extend({className:CCweb.view_plan_multiple_price.prototype.className+" plan_device_edu",events:{"click a.btn":"onButtonClick"},initialize:function(e){this.headerTemplate=_.template('<div class="plan_option"><div class="plan_title"><%= title %></div><div class="plan_subtitle"><%= subtitle %></div></div><div class="hrule">'),this.perDeviceTemplate=_.template('<div class="per_device"><%= CCweb.util.loc("(per device)") %></div>'),CCweb.view_plan_multiple_price.prototype.initialize.call(this,e)},render:function(){return CCweb.view_plan_multiple_price.prototype.render.call(this),this.$el.prepend(this.headerTemplate({title:this.model.get("title"),subtitle:this.model.get("subtitle")})),this.model.get("showVAT")&&this.$(".vat_info").append("&nbsp;"),this.$(".plan_cost_info").prepend(this.perDeviceTemplate()),this.addPhoneNumbers(),this},addPhoneNumbers:function(){var e=CCweb.models.currency.get("currency"),t=CCweb.util.eduSalesContactPhoneMap[e];t&&"au"===e?(this.$(".device_edu_au_phone").html('<div class="desktop">'+t[0]+'</div><a class="mobile" href="tel:'+t[0]+'">'+t[0]+"</a>"),this.$(".device_edu_nz_phone").html('<div class="desktop">'+t[1]+'</div><a class="mobile" href="tel:'+t[1]+'">'+t[1]+"</a>")):t&&this.$(".device_edu_phone").html('<div class="desktop">'+t+'</div><a class="mobile" href="tel:'+t+'">'+t+"</a>")},onButtonClick:function(){var e=this.model.get("buttons");e&&e.stepOne&&e.stepOne.trackingId&&CCweb.events.trigger(e.stepOne.trackingId)}}):void 0;